<!DOCTYPE html>
<html lang="en">
<head>
        <title>A notch above a monkey</title>
        <meta charset="utf-8" />
        <link rel="shortcut icon" href="theme/img/markos.ico" />

        <link rel="stylesheet" type="text/css" href="theme/css/home.min.css" media="screen" />
				<style type="text/css" title="Light theme">
body {background-color: #fbf8e9;color: #30303c;}
body > footer a, body > footer a:visited {color: #ffb665;}
a, a:visited, a:hover {color: #980000;}
body > footer {background-color:#30303c;color:#fbf8e9;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;border:1px solid #30303c;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #30303c;}
ol.code {border: 1px solid #30303c;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_dark_small_bg.png);overflow:hidden;text-indent:-200px;}
				</style>

				<style type="text/css" title="Dark theme">
body {background-color: #30303c;color: #fbf8e9;}
body > footer a, body > footer a:visited {color: #980000;}
a, a:visited, a:hover {color: #ffb665;}
body > footer {background-color:#fbf8e9;color:#30303c;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #fbf8e9;}
ol.code {border: 1px solid #fbf8e9;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_light_small_bg.png);overflow:hidden;text-indent:-200px;}
				</style>

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
        <link href="/articles/feeds/python.atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Categories Atom Feed" />
</head>

<body>

<h2>Articles in the Python category</h2>

<section class="envelope posts">
    <header>
        <h1><a href="../">A notch above a monkey <strong></strong></a></h1>
    </header><!-- /#banner -->

    <nav class="colophon">
        <h1>By Marko Samastur</h1>
        <ul>
            <li><a href="/">About me</a></li>
            <li><a href="/articles/feeds/atom.xml">Subscribe</a></li>
        </ul>
    </nav>

        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../updated-sgmllib.html" rel="bookmark" title="Permalink to Updated sgmllib">Updated sgmllib</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  I
  <a href="sgmllibpy-parser-woes.html">
   wrote
  </a>
  about a sgmllib problem a few days ago. I still may be a dolt and my code certainly needed fixing, but the bug remained nevertheless.
 </p>
 <p>
  Hence I’ve made some small changes to sgmllib that fix problems I’ve had. New version, which passes all unit tests included in Python distribution, can be found
  <a href="http://markos.gaivo.net/examples/sgmllib/sgmllib.py" title="fixed sgmllib.py">
   here
  </a>
  and I’d really appreciate if users of sgmllib could give it a go (that includes users of htmllib and BeautifulSoup).
 </p>
 <p>
  <strong>
   Update:
  </strong>
  As suggested I’ve added an
  <a href="http://markos.gaivo.net/examples/sgmllib/test_sgmllib.py" title="Test cases for new library">
   updated version
  </a>
  of test_sgmllib.py, which includes an example where the old library fails and new one doesn’t.
 </p>
 <p>
  <strong>
   Update 2
  </strong>
  : It
  <a href="sgmllibpy-parser-woes.html">
   seems
  </a>
  this is valid, even required SGML behavior.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-04-01T15:05:00+02:00">Sat 01 April 2006</time> </li>
                    <li><a href="../updated-sgmllib.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../sgmllibpy-parser-woes.html" rel="bookmark" title="Permalink to sgmllib.py parser woes">sgmllib.py parser woes</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  Does anybody have problems with sgmllib.py?
 </p>
 <p>
  After I spent way too much time hunting a bug in my code, I gave up, read the
  <em>
   goahead
  </em>
  function in
  <em>
   sgmllib.py
  </em>
  and I’m certain now that its parser is broken.
 </p>
 <p>
  Let’s say you’re handling a web page with inline Javascript code which also includes HTML tags. Even if you use a
  <em>
   setliteral
  </em>
  method to skip processing data inside
  <em>
   &lt;script&gt;
  </em>
  tags,
  <em>
   sgmllib.py
  </em>
  will start doing so when it encounters first &lt;/. It interprets this as a start of an end tag and tries  to close it. Even though code handles cases of known and unknown tags, it fails to do the right thing because it simply doesn’t expect a scenario where this isn’t a tag at all.
 </p>
 <p>
  The other possibility is that I’m simply a dolt who should do stuff like this only when rested. By the way, where’s the proper place to make an ass out of myself complaining about standard library?
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-03-28T20:51:00+02:00">Tue 28 March 2006</time> </li>
                    <li><a href="../sgmllibpy-parser-woes.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../universal-encoding-detector.html" rel="bookmark" title="Permalink to Universal Encoding Detector">Universal Encoding Detector</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  Few months ago, while exporting vCards from Apple’s Address Book (which uses UTF-16 instead of to me more common UTF-8), I discovered that there’s really no general agreement on which encoding should be used for storing vCards. It was quite a disheartening discovery, since you can’t get this information from a filesystem and it’s difficult to transform encoding to a uniform one, if you don’t know the encoding of the source.
 </p>
 <p>
  I decided to tackle this problem once other problems were solved and I’m happy to say my procrastination payed off. Mark Pilgrim wrote another excellent
  <a href="http://chardet.feedparser.org/" title="Universal Encoding Detector">
   module
  </a>
  which solves my problem better than I ever could.
 </p>
 <p>
  Universal Encoding Detector is a python port of code used by Mozilla to accomplish the same thing and is really very simple to use. Obviously it can’t be perfect since it’s not possible detect encoding completely reliably. But it works quite well and if you need such functionality, you should really give it a try.
 </p>
 <p>
  And people say laziness doesn’t pay off.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-03-17T22:22:00+01:00">Fri 17 March 2006</time> </li>
                    <li><a href="../universal-encoding-detector.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>

<ul class="paginator">
		<li class="newer">
        <a href="../category/python3.html">&laquo; Newer</a>
		</li>
		<li class="current">
    4 / 6
		</li>
		<li class="older">
        <a href="../category/python5.html">Older &raquo;</a>
		</li>
</ul>
</section><!-- /#content -->

    <footer>
        <ul>
            <li>&copy; 2005-2016 Marko Samastur</li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/" class="mini-logo">Back to homepage</a>
    </footer>
</body>
</html>