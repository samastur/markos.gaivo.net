<!DOCTYPE html>
<html lang="en">
<head>
        <title>A notch above a monkey</title>
        <meta charset="utf-8" />
				<meta name="viewport" content="width=device-width, initial-scale=1">

				<link rel="shortcut icon" href="/articles/theme/favicon/favicon.ico" />
				<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/articles/theme/favicon/apple-touch-icon-57x57.png" />
				<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/articles/theme/favicon/apple-touch-icon-114x114.png" />
				<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/articles/theme/favicon/apple-touch-icon-72x72.png" />
				<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/articles/theme/favicon/apple-touch-icon-144x144.png" />
				<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/articles/theme/favicon/apple-touch-icon-60x60.png" />
				<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/articles/theme/favicon/apple-touch-icon-120x120.png" />
				<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/articles/theme/favicon/apple-touch-icon-76x76.png" />
				<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/articles/theme/favicon/apple-touch-icon-152x152.png" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-196x196.png" sizes="196x196" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-96x96.png" sizes="96x96" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-32x32.png" sizes="32x32" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-16x16.png" sizes="16x16" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-128.png" sizes="128x128" />
				<meta name="application-name" content="Marko Samastur"/>
				<meta name="msapplication-TileColor" content="#FBF8E9" />
				<meta name="msapplication-TileImage" content="/articles/theme/favicon/mstile-144x144.png" />
				<meta name="msapplication-square70x70logo" content="/articles/theme/favicon/mstile-70x70.png" />
				<meta name="msapplication-square150x150logo" content="/articles/theme/favicon/mstile-150x150.png" />
				<meta name="msapplication-wide310x150logo" content="/articles/theme/favicon/mstile-310x150.png" />
				<meta name="msapplication-square310x310logo" content="/articles/theme/favicon/mstile-310x310.png" />

        <style>
/*
 * Icecream theme by Marko Samastur (markos@gaivo.net)
 *
 *
 * Color palette:
 * - dark blue: #30303c
 * - light yellow: fbf8e9
 * - link red: #980000
 * - link orange: #ffb665
 */
*{box-sizing:border-box}html,body{padding:0;margin:0;height:100%}body{position:relative;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;font-size:18px;line-height:1.333333}section,article,aside,header,footer{display:block}h1,h2,h3,h4,h5,h6{margin:1.5em 0;font-size:1.777777em;font-weight:200;line-height:1.5}a:visited,a{text-decoration:none}a:hover{text-decoration:underline}a img{border:0;margin-top:6px}img{max-width:100%}.envelope{position:relative;max-width:60em;width:calc(100% - 2em);margin:2em auto 0;padding:0 0 8em}body > footer{position:fixed;bottom:0;width:100%;height:6em;margin:0;padding:.5em 1em 0;font-size:.8em;text-align:center}body > footer ul{list-style-type:none;margin:0;padding:0}body > footer li{margin:.25em 0}@media (min-device-width:600px){body > footer{height:3em;text-align:left}body > footer ul{display:inline-block}body > footer li{display:inline-block;margin:.5em 2em 0 0}body > footer .mini-logo{float:right}}.about h1{margin:0}.about h2{margin-bottom:0}.about p{margin:1.333333em 0}aside{margin-bottom:2.666666em}aside .photo{max-width:100%;max-height:11.2em;margin:0 1em 8px 0;padding:3px}aside ul{list-style-type:none;margin:0 0 1.333333em;padding:0;overflow:hidden}aside .vcard li{float:none;margin:0}aside li{float:left;margin:.25em 8px 0 0.1em}aside p{margin:0}aside a.email{padding-left:20px;background:url(../img/email-16x16.png) no-repeat 0 0}aside a.website{padding-left:20px;background:url(../img/website-16x16.png) no-repeat 0 0}.elsewhere-links{padding:0 0 0 .5em;list-style-type:inherit}.elsewhere-links > li{float:none;list-style-type:'- '}@media (min-device-width:600px){aside{float:right;width:30%}.about{width:62%;max-width:60em}}body > header h1{font-size:1em;margin:0;padding:.666666em 1em;line-height:1}.post-text h2,.post-text h3{margin:1em 0;font-size:1.333333em;line-height:1}.post .entry-title{margin:1.3333333em 0 0}.post p{margin:1.333333em 0}.post .post-info ul{margin:0 0 2.666666em;padding-left:0}.post .post-info li{list-style-type:none}.post > footer li{font-variant:small-caps}@media (min-device-width:600px){.post .post-info{float:right;width:30%;margin-top:o}.post .post-info ul{margin-bottom:0}.post .post-text,.post #isso-thread{width:62%;max-width:60em}.post p:first-child{margin-top:0}}.posts h1{margin-bottom:0}.colophon h1{margin-top:0;font-size:1em;font-weight:300;line-height:1.333333;font-variant:small-caps}.colophon ul{list-style-type:none;margin:1.333333em 0;padding:0}.posts .entry-title{margin:2.666666em 0 0;font-size:1.333333em;line-height:1}.posts p{margin:1.333333em 0}.post-metadata ul{margin:1.333333em 0;padding-left:0;opacity:.8}.post-metadata li{list-style-type:none;display:inline-block;font-style:italic}.post-metadata li:first-child:after{content:" |"}.posts .paginator{margin-top:2.666666em;padding-left:0;text-align:center}.paginator li{list-style-type:none;display:inline-block;margin:0 .5em}@media (min-device-width:600px){.colophon{float:right;width:30%;margin-top:0}.hentry{width:62%;max-width:60em}nav + .hentry .entry-title{margin-top:0}}.error{text-align:left}.error img{max-width:100%;padding:3px}.imageR img{float:right;margin:.7em 0 .7em 1.5em;padding:3px}.imageL img{float:left;margin:.7em 1.5em .7em 0;padding:3px}.zemanta-related-title{font-size:1em;margin:2.8em 0 0}.zemanta-img .wp-caption{margin:0 0 0 1.5em}.zemanta-img img{padding:3px}.zemanta-pixie{display:none}.alignleft{float:left}.alignright{float:right}.aligncenter{text-align:center;max-width:100%}.alignleft img,img.alignleft,.alignright img,img.alignright,.aligncenter img,img.aligncenter{padding:3px}ol.code{font:normal 95%/110% Andale Mono,Courier,monospace;padding:5px;text-align:left}ol.code code{font:normal 98%/110% Andale Mono,Courier,monospace}.code li.tab1{padding-left:1em}.code li.tab2{padding-left:2em}.code li.tab3{padding-left:3em}.code li.tab4{padding-left:4em}.code li.tab5{padding-left:5em}.code li.tab6{padding-left:6em}.code li.download,.code li:nth-last-child(2){list-style-type:none}.highlight pre{overflow:auto}				</style>

				<style type="text/css" title="Light theme">
body {background-color: #fbf8e9;color: #30303c;}
body > footer a, body > footer a:visited {color: #ffb665;}
a, a:visited, a:hover {color: #980000;}
body > footer {background-color:#30303c;color:#fbf8e9;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;border:1px solid #30303c;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #30303c;}
ol.code {border: 1px solid #30303c;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_dark_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

				<style type="text/css" title="Dark theme">
body {background-color: #30303c;color: #fbf8e9;}
body > footer a, body > footer a:visited {color: #980000;}
a, a:visited, a:hover {color: #ffb665;}
body > footer {background-color:#fbf8e9;color:#30303c;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #fbf8e9;}
ol.code {border: 1px solid #fbf8e9;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_light_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
        <link href="/articles/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Categories Atom Feed" />
</head>

<body>

<h2>Articles in the General development, Web category</h2>

<section class="envelope posts">
    <header>
        <h1><a href="../">A notch above a monkey <strong></strong></a></h1>
    </header><!-- /#banner -->

    <nav class="colophon">
        <h1>By Marko Samastur</h1>
        <ul>
            <li><a href="/">About me</a></li>
            <li><a href="/articles/feeds/atom.xml">Subscribe</a></li>
        </ul>
    </nav>

        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../save-bandwidth-switch.html" rel="bookmark" title="Permalink to Save bandwidth switch">Save bandwidth switch</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  Michal Migurski recently posted
  <a href="http://mike.teczno.com/notes/bandwidth.html">
   an article
  </a>
  about download sizes of popular websites. I couldn’t replicate his results
  <sup>
   <a href="#save-bandwidth-note-1" id="save-bandwidth-1">
    [1]
   </a>
  </sup>
  , but it is obvious that gist of Michal’s article is correct, websites have indeed ballooned significantly in last few years.
 </p>
 <p>
  This blog’s homepage has a footprint of around 250KB-270KB
  <sup>
   <a href="#save-bandwidth-note-2" id="save-bandwidth-2">
    [2]
   </a>
  </sup>
  . About 90% of its size are fonts and
  <a href="http://jquery.com/">
   jQuery
  </a>
  which is a big penalty for making it look and behave a bit nicer. So should I remove those parts?
 </p>
 <p>
  Well, for most visitors to this website that difference doesn’t matter. Pages for them are neither slow nor expensive to load. Unless of course they are doing it over your average hotel Wi-Fi or a slow mobile network where speed around 56Kb/s is not unheard of. On such connection it would take about half a minute to load this blog. It can also cost more than 10 euro cents to load it when roaming in Europe.
 </p>
 <p>
  It would be great if I could offer a choice of serving bigger and nicer or smaller and faster version depending on visitors needs.
 </p>
 <p>
  Measuring speed is not easy, but certainly doable as Gmail has demonstrated. You could start a timer immediately in page header, measure how much time it takes to load a smaller version of a website and if that happened quickly enough upgrade it to full bling. Android browser also added support for
  <a href="http://dvcs.w3.org/hg/dap/raw-file/tip/network-api/index.html">
   navigator.connection
  </a>
  Javascript property which, where it exists, probably has more details than you would need.
 </p>
 <p>
  However there is no way to measure price of a visit. Even if I could, how would I decide what is too expensive for an anonymous reader and should I make such decisions at all? I think not.
 </p>
 <p>
  Gmail’s approach is really just a band-aid over what should be a visitor’s decision. I use same laptop and browser at home and while I travel, experiencing all combinations of connection speed and pricing. I never know how much it will cost me to visit a page, but I always learn quickly if I would prefer something small or full-featured. There is just no way I can communicate that preference.
 </p>
 <p>
  It would be great if my browser had a switch for this purpose, like Firefox’s “Work Offline” toggle. So if I switched to bandwidth saving mode, then every subsequent request to web server would communicate my preference with a HTTP header field like:
 </p>
 <blockquote>
  <p>
   X-Bandwidth: save
  </p>
 </blockquote>
 <p>
  In principle you could have multiple levels of bandwidth consumption, but that would likely be an overkill. Common practice suggests that at most two levels would really get used, one aimed at mobile devices and other at desktop.
 </p>
 <p>
  Header like that might be enough, but even better would be if Javascript environment got another property describing current state of user’s preference (like say
  <em>
   navigator.bandwidth
  </em>
  ). Coupled with a bandwidth event triggered on change you could really optimize every modern web page, even those with more complicated loading of resources and execution paths.
 </p>
 <p>
  Right now such functionality doesn’t exist or at least I couldn’t find it (I even searched Mozilla’s bug database for any future plans). I think my proposal is both user and developer friendly and workable. If you can think of a reason why it would be problematic, then I would really like to hear it.
 </p>
 <ol>
  <li id="save-bandwidth-note-1">
   Pages are often personalized for visitor. Developer tools of different browsers also don’t report same sizes. They also report amount of data transferred not the size of that data once unpacked. Almost 2M of Twitter’s Javascript is thus reduced into page of “only” about 1MB of data transferred. And that to display couple of sentences.
   <a href="#save-bandwidth-1">
    ↩
   </a>
  </li>
  <li id="save-bandwidth-note-2">
   Depends on browser used. Variation in sizes is probably due different formats of fonts used by browsers. It also changed once I published this post.
   <a href="#save-bandwidth-2">
    ↩
   </a>
  </li>
 </ol>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2012-03-15T08:52:00+01:00">Thu 15 March 2012</time> </li>
                    <li><a href="../save-bandwidth-switch.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../beta-prefix-algorithm-for-css.html" rel="bookmark" title="Permalink to -beta- prefix algorithm for CSS">-beta- prefix algorithm for CSS</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  These have been eventful couple of days for web developers. CSS Working Group chair
  <a href="http://www.glazman.org/weblog/dotclear/index.php?post/2012/02/09/CALL-FOR-ACTION%3A-THE-OPEN-WEB-NEEDS-YOU-NOW">
   called on everyone
  </a>
  to use all (most?) vendor prefixes and stop making websites for WebKit which is becoming a new (mobile) IE6. Responses have been numerous,
  <a href="http://www.quirksmode.org/blog/archives/2012/02/the_vendor_pref.html" title="PPK's first article about prefixes">
   including
  </a>
  <a href="http://www.quirksmode.org/blog/archives/2012/02/alpha_and_beta.html" title="PPK's follow up to first article">
   ppk
  </a>
  who in his usual obnoxious manner
  <sup>
   <a href="#beta-prefix-note-1" id="beta-prefix-1">
    [1]
   </a>
  </sup>
  made some good points. Testing on mobile devices is an unsolved problem (who wants or can afford to buy so many almost immediately obsolete gadgets?) and introducing -beta- (maybe also -alpha-) prefix would simplify our lives while keeping most benefits of vendor prefixes.
 </p>
 <p>
  I like -beta- idea and I think adding -alpha- might be even better. There’s still a problem of resolving syntax conflicts between different implementation which I think has a simple solution that closely mimics what browsers already do:
 </p>
 <p>
  <em>
   When parsing CSS browsers
  </em>
  <em>
   should apply the last matching -beta-/-alpha- directive they fully understand.
  </em>
 </p>
 <p>
  Browsers already ignore directives they don’t understand and they apply last directive found when there are multiple candidates for a DOM node.
 </p>
 <p>
  Such behavior would give us less CSS code to write and maintain, have predictable behavior and keep browser experimentation without favoring one. I have troubles finding negative sides of this approach, but do let me know if you can think of one.
 </p>
 <ol>
  <li id="beta-prefix-note-1">
   I deeply dislike his complaining about simplistic view of others while himself generalizing and name-calling (the lazy and stupid lot of us). Alas it’s not good to read only people you like and agree with.
   <a href="#beta-prefix-1">
    ↩
   </a>
  </li>
  <li>
   Almost everything I write on this blog has an intended  audience of one:  me (no, really!). Why I sometimes write posts like  this, which don’t, is a mistery  since their expected and actual effect on anyone  is…none.
  </li>
 </ol>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2012-02-10T18:21:00+01:00">Fri 10 February 2012</time> </li>
                    <li><a href="../beta-prefix-algorithm-for-css.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../cookies-localstorage-and-shared-state.html" rel="bookmark" title="Permalink to Cookies, localStorage and shared state">Cookies, localStorage and shared state</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  I’ve been fiddling with my website again, changing theme switching from somewhat dumb class based system to a more proper one using alternate style sheets. I learned that picking a style sheet in browser applies those changes only to currently open page, so for style sheet selection to persevere it needs a bit of Javascript support from website owner. Personally I find this just stupid.
 </p>
 <p>
  The easiest way to remember visitor’s preference is to store it in his browser. Cookies used to be popular before they were deemed evil, but they have other limitations as well. Hence popular switch to HTML5 in-browser storage technologies like
  <a href="http://www.w3.org/TR/webstorage/">
   localStorage
  </a>
  .
 </p>
 <p>
  I think there is one important difference between cookies and tools like localStorage that is often overlooked and it’s not the size of data that can be stored. Cookies are sent with
  <em>
   each page request
  </em>
  while data stored elsewhere isn’t. Changing them on any side will automatically share state with the other. I use localStorage in my theme switcher because I think server doesn’t need and should not know which theme is used. But for storing shared data, especially one that expires, cookies remain a reasonable if not best choice.
 </p>
 <p>
  None of this is exactly new, but I think it is worth remembering. In other news I dislike interface limitations of Chrome more and more (exceptions are Developer Tools and extensions framework).
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2011-12-19T17:05:00+01:00">Mon 19 December 2011</time> </li>
                    <li><a href="../cookies-localstorage-and-shared-state.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>

<ul class="paginator">
		<li class="current">
    1 / 7
		</li>
		<li class="older">
        <a href="../category/general-development-web2.html">Older &raquo;</a>
		</li>
</ul>
</section><!-- /#content -->

    <footer>
        <ul>
            <li>&copy; 2005-2020 Marko Samastur</li>
						<li><a href="/articles/privacy-policy.html">Privacy policy</a></li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/" class="mini-logo">Back to homepage</a>
    </footer>
</body>
</html>