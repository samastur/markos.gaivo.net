<!DOCTYPE html>
<html lang="en">
<head>
        <title>A notch above a monkey - web</title>
        <meta charset="utf-8" />
				<meta name="viewport" content="width=device-width, initial-scale=1">

				<link rel="shortcut icon" href="http://markos.gaivo.net/articles/theme/favicon/favicon.ico" />
				<link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-57x57.png" />
				<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-114x114.png" />
				<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-72x72.png" />
				<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-144x144.png" />
				<link rel="apple-touch-icon-precomposed" sizes="60x60" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-60x60.png" />
				<link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-120x120.png" />
				<link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-76x76.png" />
				<link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://markos.gaivo.net/articles/theme/favicon/apple-touch-icon-152x152.png" />
				<link rel="icon" type="image/png" href="http://markos.gaivo.net/articles/theme/favicon/favicon-196x196.png" sizes="196x196" />
				<link rel="icon" type="image/png" href="http://markos.gaivo.net/articles/theme/favicon/favicon-96x96.png" sizes="96x96" />
				<link rel="icon" type="image/png" href="http://markos.gaivo.net/articles/theme/favicon/favicon-32x32.png" sizes="32x32" />
				<link rel="icon" type="image/png" href="http://markos.gaivo.net/articles/theme/favicon/favicon-16x16.png" sizes="16x16" />
				<link rel="icon" type="image/png" href="http://markos.gaivo.net/articles/theme/favicon/favicon-128.png" sizes="128x128" />
				<meta name="application-name" content="Marko Samastur"/>
				<meta name="msapplication-TileColor" content="#FBF8E9" />
				<meta name="msapplication-TileImage" content="http://markos.gaivo.net/articles/theme/favicon/mstile-144x144.png" />
				<meta name="msapplication-square70x70logo" content="http://markos.gaivo.net/articles/theme/favicon/mstile-70x70.png" />
				<meta name="msapplication-square150x150logo" content="http://markos.gaivo.net/articles/theme/favicon/mstile-150x150.png" />
				<meta name="msapplication-wide310x150logo" content="http://markos.gaivo.net/articles/theme/favicon/mstile-310x150.png" />
				<meta name="msapplication-square310x310logo" content="http://markos.gaivo.net/articles/theme/favicon/mstile-310x310.png" />

        <link rel="stylesheet" type="text/css" href="theme/css/home.min.css" media="screen" />
				<style type="text/css" title="Light theme">
body {background-color: #fbf8e9;color: #30303c;}
body > footer a, body > footer a:visited {color: #ffb665;}
a, a:visited, a:hover {color: #980000;}
body > footer {background-color:#30303c;color:#fbf8e9;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;border:1px solid #30303c;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #30303c;}
ol.code {border: 1px solid #30303c;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_dark_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

				<style type="text/css" title="Dark theme">
body {background-color: #30303c;color: #fbf8e9;}
body > footer a, body > footer a:visited {color: #980000;}
a, a:visited, a:hover {color: #ffb665;}
body > footer {background-color:#fbf8e9;color:#30303c;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #fbf8e9;}
ol.code {border: 1px solid #fbf8e9;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_light_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
</head>

<body>


<section class="envelope posts">
    <header>
        <h1><a href="../">A notch above a monkey <strong></strong></a></h1>
    </header><!-- /#banner -->

    <nav class="colophon">
        <h1>By Marko Samastur</h1>
        <ul>
            <li><a href="/">About me</a></li>
            <li><a href="/articles/feeds/atom.xml">Subscribe</a></li>
        </ul>
    </nav>

        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../laughable-javascript-security.html" rel="bookmark" title="Permalink to Laughable Javascript security">Laughable Javascript security</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  Building a secure web application is not easy, unless you also use 3rd party code such as Facebook’s Like widget in which case it is impossible. What you have is just an illusion of security, a door to abuse that you can’t even check if it is currently closed.
 </p>
 <p>
  Or that’s what I thought for years. A once substantiated belief that grew into an almost dogmatic certainty until I recently got a chance to revisit it when trying to design a secure Javascript-based web application living inside of a likely untrusted environment.
 </p>
 <p>
  There are obvious things you can do to protect your application such as delivery over secure connections and use of anonymous functions to sandbox your code from outside interference. However you will probably need to interact with external code at some point in which case is that
  <em>
   XMLHTTPRequest
  </em>
  object you are using really the built-in one or has it been replaced (cloaked) with an impostor object to perform
  <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">
   the man-in-the-middle attack
  </a>
  ?
 </p>
 <p>
  I don’t know of a way to check if an object is untouched. What is sometimes used instead is a
  <em>
   .toString
  </em>
  method which on functions and methods returns their source unless they are native to browser in which case it returns a string saying so.
 </p>
 <p>
  Since you can replace any attribute and method on any object some
  <a href="http://stackoverflow.com/questions/6598945/detect-if-function-is-native-to-browser#comment8044242_6599105">
   go even further
  </a>
  in search of a certainty and use
  <em>
   .toString
  </em>
  from the
  <em>
   Function
  </em>
  object.
 </p>
 <p>
  At first thought that looked clever until I came up with:
 </p>
 <ol class="code">
  <li>
   <code>
    &lt;!DOCTYPE HTML&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;html lang="en"&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;head&gt;
   </code>
  </li>
  <li class="tab1">
   <code>
    &lt;meta charset="UTF-8"&gt;
   </code>
  </li>
  <li class="tab1">
   <code>
    &lt;title&gt;Break check if function is native&lt;/title&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;/head&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;body&gt;
   </code>
  </li>
  <li class="tab1">
   <code>
    &lt;script&gt;
   </code>
  </li>
  <li>
   <code>
    (function () {
   </code>
  </li>
  <li class="tab1">
   <code>
    var toS = Function.prototype.toString,
   </code>
  </li>
  <li class="tab2">
   <code>
    pM_str = window.postMessage.toString();
   </code>
  </li>
  <li>
  </li>
  <li class="tab1">
   <code>
    Function.prototype.toString = function () {
   </code>
  </li>
  <li class="tab2">
   <code>
    return this === window.postMessage ? pM_str : toS.call(this);
   </code>
  </li>
  <li class="tab1">
   <code>
    }
   </code>
  </li>
  <li class="tab1">
   <code>
    window.postMessage = function () { console.log('Fake'); };
   </code>
  </li>
  <li>
   <code>
    })();
   </code>
  </li>
  <li class="tab1">
   <code>
    &lt;/script&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;/body&gt;
   </code>
  </li>
  <li>
   <code>
    &lt;/html&gt;
   </code>
  </li>
  <li>
  </li>
  <li class="download">
   Download this code:
   <a href="http://markos.gaivo.net/blog/code/nativecheck.txt" title="Download the above code as a text file">
    /code/nativecheck.txt
   </a>
  </li>
 </ol>
 <p>
  The code above replaces
  <em>
   Function’s .toString
  </em>
  method with a one that lies when executed on an also cloaked
  <em>
   window.postMessage
  </em>
  . Instead of displaying source of the new
  <em>
   postMessage
  </em>
  it prints whatever browser would print for the original one.
 </p>
 <p>
  It simultaneously demonstrates how you can cloak native Javascript objects and hide that you are doing it. If you put malicious code into an anonymous function and remove
  <em>
   &lt;script&gt;
  </em>
  node that added it after it gets executed, then there is no way for scripts loading later to know that it happened. There will be no traces of crime.
 </p>
 <p>
  It might be difficult to cloak literals like {} and [], but you certainly can their methods so even if your code is wrapped in an anonymous function, it isn’t really secured from outside peeking and poking. Hence you even
  <strong>
   can’t trust your own code
  </strong>
  .
 </p>
 <p>
  Turns out that this particular dogma is also true. Depressing.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2013-07-11T22:57:00+02:00">Thu 11 July 2013</time> </li>
                    <li><a href="../laughable-javascript-security.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../game-mechanics-on-web.html" rel="bookmark" title="Permalink to Game mechanics on web">Game mechanics on web</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  I recently read
  <a class="zem_slink" href="http://en.wikipedia.org/wiki/Raph_Koster" rel="wikipedia" title="Raph Koster">
   Raph Koster
  </a>
  ‘s
  <a href="http://www.amazon.com/gp/product/1932111972?ie=UTF8&amp;tag=devel-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=1932111972">
   Theory of Fun for Game Design
  </a>
  <img alt="" border="0" height="1" src="http://www.assoc-amazon.com/e/ir?t=devel-20&amp;l=as2&amp;o=1&amp;a=1932111972" style="border:none !important; margin:0px !important;" width="1"/>
  , which I can heartily recommend to anyone interested in what games are all about. But it’s this part on page 88 that really got my attention, since I can relate it to what I do:
 </p>
 <blockquote>
  <p>
   Games are not stories. It is interesting to make the comparison, though:
  </p>
  <ul>
   <li>
    Games tend to be experiential teaching. Stories teach vicariously.
   </li>
   <li>
    Games are good at
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/Objectification" rel="wikipedia" title="Objectification">
     objectification
    </a>
    . Stories are good at empathy.
   </li>
   <li>
    Games tend to quantize, reduce and classify. Stories tend to blur, deepen, and make subtle distinctions.
   </li>
   <li>
    Games are external — they are about people’s actions. Stories (good ones, anyway) are internal — they are about people’s emotions and thoughts.
   </li>
  </ul>
 </blockquote>
 <p>
  A lot has been said in last couple of years about
  <a class="zem_slink" href="http://en.wikipedia.org/wiki/Game_mechanic" rel="wikipedia" title="Game mechanic">
   game mechanics
  </a>
  and how its principles could be successfully used to make our websites more engaging and fun. Game-like without necessary becoming games. Still more should be said to penetrate consciousness of wider web industry.
 </p>
 <p>
  But should all websites incorporate devices like collecting points or customization?
 </p>
 <p>
  Probably not. Well thought through website has its purpose which usually means it wants to provoke action on visitor’s part. Intended action may be almost anything apart from abandoning site immediately. It may be buying at least an item on a commerce site, leaving a comment or subscribe to blog.
 </p>
 <p>
  I’ve been thinking about above comparisons for days and it would suggest to me that principles of game mechanics are more appropriate for and easier to add to sites that can reasonably aim for prolonged interaction with a visitor.
 </p>
 <p>
  E.g. a personal blog like this one is visited mostly by google-by visitors. Comments and other engagement devices might increase its pull, but game mechanics obviously plays second fiddle to a good story, told through its content and web design (both sorely lacking on this particular blog). Same is true for most brochure-ware sites.
 </p>
 <p>
  <a class="zem_slink" href="http://amazon.com/" rel="homepage" title="Amazon">
   Amazon.com
  </a>
  presents other side of spectrum. It is visited mostly by people who aren’t there to read an item description and leave, but are at least somewhat open to interaction with the site. As such it makes sense to incorporate more elements that can keep visitors engaged, such as easy rating of items, reviews etc. Same goes for most web applications.
 </p>
 <p>
  I believe that most websites could successfully apply at least some elements from games, but like with everything else they shouldn’t be used too liberally and without understanding. Keeping in mind websites purpose and listed differences between a game and a story can help you make a more informed decision on what and when to include.
 </p>
 <div class="zemanta-pixie">
  <a class="zemanta-pixie-a" href="http://reblog.zemanta.com/zemified/b1609fef-5cee-46ff-b7ef-a5397b0a5145/" title="Reblog this post [with Zemanta]">
   <img alt="Reblog this post [with Zemanta]" class="zemanta-pixie-img" src="http://img.zemanta.com/reblog_e.png?x-id=b1609fef-5cee-46ff-b7ef-a5397b0a5145"/>
  </a>
  <span class="zem-script more-related pretty-attribution">
   <script src="http://static.zemanta.com/readside/loader.js" type="text/javascript">
   </script>
  </span>
 </div>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2009-04-12T14:34:00+02:00">Sun 12 April 2009</time> </li>
                    <li><a href="../game-mechanics-on-web.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="../simplifying-registration-forms.html" rel="bookmark" title="Permalink to Simplifying registration forms">Simplifying registration forms</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  As I am leaving on a short vacation that will probably take me off grid for few days, there is still a time for a hopefully short, but definitely last post of this year. I don’t like how registration forms ask me twice for password and I think I can offer a better way.
 </p>
 <p>
  Most registration forms these days still want you to type password of your choice twice. They probably do it to reduce risk of mistyping it. I deeply dislike Facebook, but I think this is one thing it
  <a href="http://www.facebook.com/" title="Registration form on Facebook's homepage">
   got right
  </a>
  . You only have to do it once. Those with FB accounts can see this in action if they log out for a moment and visit front page.
 </p>
 <p>
  There are several reasons why once is enough. First one is that every decent page provides a way to reset password in case you have forgotten it. So even if password was mistyped, it’s easy to reset it again to a different value. Second reason is that by now it’s quite well known that most people use a low single-digit number of passwords and don’t come up with a new one each time they are asked to do so. Hence it’s quite unlikely they’ll make an error now after so much practice.
 </p>
 <p>
  Third reason is that in most cases you can
  <a href="http://markos.gaivo.net/examples/html_pattern/onepass.html" title="Demonstration of show password switch">
   help them
  </a>
  <a href="http://markos.gaivo.net/examples/html_pattern/onepass.html" style="font-size: 29.25px; line-height: 42.75px;" title="Demonstration of show password switch">
  </a>
  .
 </p>
 <p>
  When registration forms first appeared internet access was rare and expensive enough that most common environment in which it was used was work or school. It was therefore likely that when you were registering for a service, you weren’t alone and entered password had to be hidden from people around you. Today it’s probably opposite. Most of the time I am quite private and could see what I type with no additional security risk.
 </p>
 <p>
  So as in demo we could offer a switch that let visitors see what they are typing if they choose to do so. It should still be hidden by default, since we can’t really tell the environment visitor is in or if Javascript is available. It is always better to err on side of safety.
 </p>
 <p>
  As a side note for those who might have peaked at implementation. I’m replacing password input field because of Internet Explorer, which doesn’t tolerate type attribute change on input fields. Every other browser tested (FF, Opera, Safari and Chrome) would work perfectly fine by just switching field type from password to text.
 </p>
 <p>
  Anyhow, that’s it for this year. If you leave a comment, which I hope you will, and I don’t answer, it’s because I lack Internet access.
 </p>
 <div class="zemanta-pixie">
  <a class="zemanta-pixie-a" href="http://reblog.zemanta.com/zemified/29adbe87-65ae-4456-b653-87682c4081e3/" title="Zemified by Zemanta">
   <img alt="Reblog this post [with Zemanta]" class="zemanta-pixie-img" src="http://img.zemanta.com/reblog_e.png?x-id=29adbe87-65ae-4456-b653-87682c4081e3"/>
  </a>
 </div>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2008-12-29T07:30:00+01:00">Mon 29 December 2008</time> </li>
                    <li><a href="../simplifying-registration-forms.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>

<ul class="paginator">
		<li class="newer">
        <a href="../tag/web.html">&laquo; Newer</a>
		</li>
		<li class="current">
    2 / 2
		</li>
</ul>
</section><!-- /#content -->

    <footer>
        <ul>
            <li>&copy; 2005-2017 Marko Samastur</li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/" class="mini-logo">Back to homepage</a>
    </footer>
</body>
</html>