<!DOCTYPE html>
<html lang="en">
<head>
        <title>A notch above a monkey - Javascript</title>
        <meta charset="utf-8" />
        <link rel="shortcut icon" href="theme/img/markos.ico" />

        <link href="http://fast.fonts.com/cssapi/aee9b60b-8e94-47f8-b586-3ecbfab51d1c.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="theme/css/home.css" media="screen" title="Light theme" />
        <link rel="alternate stylesheet" type="text/css" href="theme/css/home_dark.css" media="screen" title="Dark theme" />
        <link rel="stylesheet" href="theme/css/ipad.css" media="only screen and (min-device-width : 768px) and (max-device-width : 1024px)">
        <link rel="stylesheet" type="text/css" href="theme/css/smallscreen.css" media="only screen and (max-width: 700px)" />

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
</head>

<body>


<section class="envelope posts">
    <header>
        <h1><a href="http://markos.gaivo.net/articles/">A notch above a monkey <strong></strong></a></h1>
    </header><!-- /#banner -->

    <nav class="colophon">
        <h1>By Marko Samastur</h1>
        <ul>
            <li><a href="/">About me</a></li>
            <li><a href="/articles/feeds/atom.xml">Subscribe</a></li>
        </ul>
    </nav>

        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="http://markos.gaivo.net/articles/dreaming-about-arithmetic-mean.html" rel="bookmark" title="Permalink to Dreaming about arithmetic mean">Dreaming about arithmetic mean</a></h1>

            <div class="entry-content post-text">
                <p><html>
 <body>
  <div>
   <p>
    I had a crazy dream, where I was back at University, but this time studying computer science. We were writing a function to calculate an
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/Arithmetic_mean" rel="wikipedia" title="Arithmetic mean">
     arithmetic mean
    </a>
    of an array of numbers. A task obviously too simple for college course, but with dreams you get what you are given.
   </p>
   <p>
    Discussion started with this function:
   </p>
   <ol class="code">
    <li>
     <code>
      function average(arr) {
     </code>
    </li>
    <li class="tab1">
     <code>
      var i, sum = 0;
     </code>
    </li>
    <li class="tab1">
     <code>
      for(i=0;i&lt;arr.length;i++) {
     </code>
    </li>
    <li class="tab2">
     <code>
      sum += arr[i];
     </code>
    </li>
    <li class="tab1">
     <code>
      }
     </code>
    </li>
    <li class="tab1">
     <code>
      return sum/i;
     </code>
    </li>
    <li>
     <code>
      }
     </code>
    </li>
    <li>
    </li>
    <li class="download">
     Download this code:
     <a href="http://markos.gaivo.net/blog/code/dreamjs.txt" title="Download the above code as a text file">
      /code/dreamjs.txt
     </a>
    </li>
   </ol>
   <p>
    Dream me, who by the way is significantly more bitchy than I ever am, wasn’t pleased and thought he could save few bytes by storing counter and sum inside of the array:
   </p>
   <ol class="code">
    <li>
     <code>
      function average(arr) {
     </code>
    </li>
    <li class="tab1 cmnt">
     <code>
      // Store counter in array[0] and sum in array[1]
     </code>
    </li>
    <li class="tab1">
     <code>
      if (arr.length &lt; 3) {
     </code>
    </li>
    <li class="tab2">
     <code>
      return arr.length == 2 ? arr[0]+arr[1] : arr[0];
     </code>
    </li>
    <li class="tab1">
     <code>
      } else {
     </code>
    </li>
    <li class="tab2">
     <code>
      arr[1] = arr[0]+arr[1];
     </code>
    </li>
    <li class="tab2">
     <code>
      arr[0] = 2;
     </code>
    </li>
    <li class="tab2">
     <code>
      for(;arr[0]&lt;arr.length;arr[0]++) {
     </code>
    </li>
    <li class="tab3">
     <code>
      arr[1] += arr[arr[0]];
     </code>
    </li>
    <li class="tab2">
     <code>
      }
     </code>
    </li>
    <li class="tab1">
     <code>
      }
     </code>
    </li>
    <li class="tab1">
     <code>
      return arr[1]/arr[0];
     </code>
    </li>
    <li>
     <code>
      }
     </code>
    </li>
    <li>
    </li>
    <li class="download">
     Download this code:
     <a href="http://markos.gaivo.net/blog/code/dreamjs2.txt" title="Download the above code as a text file">
      /code/dreamjs2.txt
     </a>
    </li>
   </ol>
   <p>
    This looked ugly, but what bothered him (me?) was more that it also had a bug. Integer in
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/JavaScript" rel="wikipedia" title="JavaScript">
     Javascript
    </a>
    is limited to 2
    <sup>
     53
    </sup>
    , which is a lot, but sum can still
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/Arithmetic_overflow" rel="wikipedia" title="Arithmetic overflow">
     overflow
    </a>
    or underflow it. Since mean can never be smaller than smallest or bigger than biggest number in a list, I could fix it by writing:
   </p>
   <ol class="code">
    <li>
     <code>
      function average(arr) {
     </code>
    </li>
    <li class="tab1">
     <code>
      var n = arr.length, sum=0;
     </code>
    </li>
    <li class="tab1">
     <code>
      while (arr.length) {
     </code>
    </li>
    <li class="tab2">
     <code>
      sum += arr.pop()/n;
     </code>
    </li>
    <li class="tab1">
     <code>
      }
     </code>
    </li>
    <li class="tab1">
     <code>
      return sum;
     </code>
    </li>
    <li>
     <code>
      }
     </code>
    </li>
    <li>
    </li>
    <li class="download">
     Download this code:
     <a href="http://markos.gaivo.net/blog/code/dreamjs3.txt" title="Download the above code as a text file">
      /code/dreamjs3.txt
     </a>
    </li>
   </ol>
   <p>
    End of dream. Everything edited for sanity and brevity.
   </p>
   <p>
    I don’t have much to say about second program except that I would never write something so ugly just to save 16 bytes in a function like this. I wouldn’t even use Javascript if memory was that important.
   </p>
   <p>
    I am more intrigued by third program. Bug in second is definitely there, even though few of us operate with numbers big enough to encounter it.
   </p>
   <p>
    It’s interesting, because if I was awake, I would probably never think of it. I used to worry about bugs like this all the time, when I was coding in C. It was an unavoidable consequence of the language.
   </p>
   <p>
    I guess what I am getting at is that it is nice to code in a high-level language and for the most part not think about implementation details like this, but only as long as you actually know them so your brain gets triggered when they matter. Speaking of details, I bet those divisions can cause rounding errors.
   </p>
   <div class="zemanta-pixie">
    <a class="zemanta-pixie-a" href="http://reblog.zemanta.com/zemified/7ab2d445-07ff-4ec6-bed9-f29a2797d7a3/" title="Reblog this post [with Zemanta]">
     <img alt="Reblog this post [with Zemanta]" class="zemanta-pixie-img" src="http://img.zemanta.com/reblog_e.png?x-id=7ab2d445-07ff-4ec6-bed9-f29a2797d7a3"/>
    </a>
    <span class="zem-script paragraph-reblog">
     <script defer="defer" src="http://static.zemanta.com/readside/loader.js" type="text/javascript">
     </script>
    </span>
   </div>
  </div>
 </body>
</html></p>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2010-01-24T11:44:00+01:00">Sun 24 January 2010</time> </li>
                    <li><a href="http://markos.gaivo.net/articles/dreaming-about-arithmetic-mean.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="http://markos.gaivo.net/articles/one-small-step.html" rel="bookmark" title="Permalink to One small step">One small step</a></h1>

            <div class="entry-content post-text">
                <p><html>
 <body>
  <div>
   <p>
    Today? or tomorrow, depending on where you happen to live, is 40 years since
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/Neil_Armstrong" rel="wikipedia" title="Neil Armstrong">
     Neil Armstrong
    </a>
    became first among few who stepped on moon. When I was a kid, there was nothing I wanted more than becoming an astronaut. Closest I ever got to this dream was having fun at
    <a class="zem_slink" href="http://www.eurospacecenter.be/envisit.htm" rel="homepage" title="Euro Space Center">
     Euro Space Center
    </a>
    .
   </p>
   <p>
    I don’t regret this, because I have a great job. It still feels a privilege to work at
    <a class="zem_slink" href="http://www.zemanta.com" rel="homepage" title="Zemanta">
     Zemanta
    </a>
    and that is why I’m happy to say that
    <a href="http://www.zemanta.com/jobs/" title="Job ad">
     we are looking for a frontend developer
    </a>
    to strengthen our team.
   </p>
   <p>
    We are searching for someone well versed with Javascript in modern browsers that wants to learn and we can learn from. Working in startup requires ability in having fun with unexpected challenges, but does not mean you will be overworked. We believe that rested developers are more creative and productive and practice what we believe in. In exchange we’ll try to be as flexible as possible to meet your (other) needs.
   </p>
   <p>
    So, if you are a developer with even an inkling of a wish to work in a company like ours, please consider
    <a href="http://www.zemanta.com/jobs/" title="Job ad">
     applying
    </a>
    . You can also leave any question you might have in comments and I’ll try to answer it to the best of my abilities.
   </p>
   <div class="zemanta-pixie" style="margin-top: 10px; height: 15px;">
    <a class="zemanta-pixie-a" href="http://reblog.zemanta.com/zemified/776f1526-aafa-4206-9966-4658717c9e0e/" title="Reblog this post [with Zemanta]">
     <img alt="Reblog this post [with Zemanta]" class="zemanta-pixie-img" src="http://img.zemanta.com/reblog_e.png?x-id=776f1526-aafa-4206-9966-4658717c9e0e" style="border: medium none; float: right;"/>
    </a>
   </div>
  </div>
 </body>
</html></p>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2009-07-20T22:46:00+02:00">Mon 20 July 2009</time> </li>
                    <li><a href="http://markos.gaivo.net/articles/one-small-step.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="http://markos.gaivo.net/articles/one-small-step.html" rel="bookmark" title="Permalink to One small step">One small step</a></h1>

            <div class="entry-content post-text">
                <p><html>
 <body>
  <div>
   <p>
    Today? or tomorrow, depending on where you happen to live, is 40 years since
    <a class="zem_slink" href="http://en.wikipedia.org/wiki/Neil_Armstrong" rel="wikipedia" title="Neil Armstrong">
     Neil Armstrong
    </a>
    became first among few who stepped on moon. When I was a kid, there was nothing I wanted more than becoming an astronaut. Closest I ever got to this dream was having fun at
    <a class="zem_slink" href="http://www.eurospacecenter.be/envisit.htm" rel="homepage" title="Euro Space Center">
     Euro Space Center
    </a>
    .
   </p>
   <p>
    I don’t regret this, because I have a great job. It still feels a privilege to work at
    <a class="zem_slink" href="http://www.zemanta.com" rel="homepage" title="Zemanta">
     Zemanta
    </a>
    and that is why I’m happy to say that
    <a href="http://www.zemanta.com/jobs/" title="Job ad">
     we are looking for a frontend developer
    </a>
    to strengthen our team.
   </p>
   <p>
    We are searching for someone well versed with Javascript in modern browsers that wants to learn and we can learn from. Working in startup requires ability in having fun with unexpected challenges, but does not mean you will be overworked. We believe that rested developers are more creative and productive and practice what we believe in. In exchange we’ll try to be as flexible as possible to meet your (other) needs.
   </p>
   <p>
    So, if you are a developer with even an inkling of a wish to work in a company like ours, please consider
    <a href="http://www.zemanta.com/jobs/" title="Job ad">
     applying
    </a>
    . You can also leave any question you might have in comments and I’ll try to answer it to the best of my abilities.
   </p>
   <div class="zemanta-pixie" style="margin-top: 10px; height: 15px;">
    <a class="zemanta-pixie-a" href="http://reblog.zemanta.com/zemified/776f1526-aafa-4206-9966-4658717c9e0e/" title="Reblog this post [with Zemanta]">
     <img alt="Reblog this post [with Zemanta]" class="zemanta-pixie-img" src="http://img.zemanta.com/reblog_e.png?x-id=776f1526-aafa-4206-9966-4658717c9e0e" style="border: medium none; float: right;"/>
    </a>
   </div>
  </div>
 </body>
</html></p>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2009-07-20T22:46:00+02:00">Mon 20 July 2009</time> </li>
                    <li><a href="http://markos.gaivo.net/articles/one-small-step.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>

<p class="paginator">
        <a href="http://markos.gaivo.net/articles/tag/javascript.html">&laquo;</a>
    Page 2 / 4
        <a href="http://markos.gaivo.net/articles/tag/javascript3.html">&raquo;</a>
</p>
</section><!-- /#content -->

    <footer>
        <ul>
            <li>&copy; 2005-2015 Marko Samastur</li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/"><img src="/img/markos_light_small_bg.png" alt="logo" class="mini-logo" /></a>
    </footer>
</body>
</html>