<!DOCTYPE html>
<html lang="en">
<head>
          <title>A notch above a monkey</title>
        <meta charset="utf-8" />
        <link rel="shortcut icon" href="theme/img/markos.ico" />

        <link rel="stylesheet" type="text/css" href="theme/css/home.min.css" media="screen" />
				<style type="text/css" title="Light theme">
body {background-color: #fbf8e9;color: #30303c;}
body > footer a, body > footer a:visited {color: #ffb665;}
a, a:visited, a:hover {color: #980000;}
body > footer {background-color:#30303c;color:#fbf8e9;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;border:1px solid #30303c;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #30303c;}
ol.code {border: 1px solid #30303c;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_dark_small_bg.png);overflow:hidden;text-indent:-200px;}
				</style>

				<style type="text/css" title="Dark theme">
body {background-color: #30303c;color: #fbf8e9;}
body > footer a, body > footer a:visited {color: #980000;}
a, a:visited, a:hover {color: #ffb665;}
body > footer {background-color:#fbf8e9;color:#30303c;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #fbf8e9;}
ol.code {border: 1px solid #fbf8e9;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_light_small_bg.png);overflow:hidden;text-indent:-200px;}
				</style>

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
        <link href="/articles/feeds/javascript-ui-web.atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Categories Atom Feed" />




</head>

<body>
<header id="banner" class="body">
    <h1><a href="./">A notch above a monkey</a> &raquo; Multitasking with POST requests - part II</h1>
</header><!-- /#banner -->

<section class="envelope">
    <article class="post">
        <header class="entry-title">
            <h1 class="entry-title">Multitasking with POST requests - part II</h1>
         
        </header>

        <footer class="post-info">
            <ul>
                <li class="by">Written by: <a href="/">Marko Samastur</a></li>
                <li class="published">Published on: <time datetime="2005-12-16T13:55:00+01:00" pubdate>Fri 16 December 2005</time></li>
                <li class="categories">Category: Javascript, UI, Web
                </li>
            </ul>

        </footer><!-- /.post-info -->

        <div class="post-text">
            <div>
 <p>
  Yesterday I wrote about my wish of making background
  <em>
   POST
  </em>
  requests that don’t get accidentally canceled. I wasn’t specific enough. You can create background
  <em>
   POST
  </em>
  requests just fine with
  <em>
   XMLHttpRequest
  </em>
  , but you can’t use such requests for file uploads, which is what I want.
 </p>
 <p>
  My first try was to post
  <em>
   form
  </em>
  to
  <em>
   iframe
  </em>
  in a different window. This didn’t work because browsers pay attention to source of request. Activating new request in source window immediately cancels previous unfinished one.
 </p>
 <p>
  A better idea was provided by always helpful
  <a href="http://dojotoolkit.org/" title="Dojo toolkit">
   dojo
  </a>
  developers. Clone
  <em>
   form
  </em>
  to progress window and submit it from there. This one works great in Firefox, but hardly anywhere else. It certainly doesn’t work in IE, since IE is very picky about what you do with nodes created with
  <em>
   cloneNode
  </em>
  and you can’t clone form yourself, since it’s not possible to set the value of file upload elements.
 </p>
 <p>
  Is this game over for unobtrusive file upload?
 </p>
 <p>
  Not yet. There are still at least two posibilities, both with downsides, but one of them definitely works. You can open file upload form in new window and change that window to progress bar. It works and I use it occasionally, but it’s not nice if you care about accessibility. It’s something users can do now, if they want, by opening upload page in new tab or window.
 </p>
 <p>
  The other, yet untried, possible solution would be to avoid cloning. Just rip the form out from original page, move it to status one and submit form there. Obvious problems with this one are that users lose information about what they’re uploading and that it can look confusing if not executed well.
 </p>
 <p>
  I’ll try it anyway and will let you know how it goes.
 </p>
 <p>
  Update: IE also dislikes ripping and moving.
 </p>
</div>
        </div><!-- /.entry-content -->

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'markosgaivo';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </article>
</section>

    <footer>
        <ul>
            <li>&copy; 2005-2016 Marko Samastur</li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/" class="mini-logo">Back to homepage</a>
    </footer>
</body>
</html>