<!DOCTYPE html>
<html lang="en">
<head>
        <title>A notch above a monkey</title>
        <meta charset="utf-8" />
				<meta name="viewport" content="width=device-width, initial-scale=1">

				<link rel="shortcut icon" href="/articles/theme/favicon/favicon.ico" />
				<link rel="apple-touch-icon-precomposed" sizes="57x57" href="/articles/theme/favicon/apple-touch-icon-57x57.png" />
				<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/articles/theme/favicon/apple-touch-icon-114x114.png" />
				<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/articles/theme/favicon/apple-touch-icon-72x72.png" />
				<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/articles/theme/favicon/apple-touch-icon-144x144.png" />
				<link rel="apple-touch-icon-precomposed" sizes="60x60" href="/articles/theme/favicon/apple-touch-icon-60x60.png" />
				<link rel="apple-touch-icon-precomposed" sizes="120x120" href="/articles/theme/favicon/apple-touch-icon-120x120.png" />
				<link rel="apple-touch-icon-precomposed" sizes="76x76" href="/articles/theme/favicon/apple-touch-icon-76x76.png" />
				<link rel="apple-touch-icon-precomposed" sizes="152x152" href="/articles/theme/favicon/apple-touch-icon-152x152.png" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-196x196.png" sizes="196x196" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-96x96.png" sizes="96x96" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-32x32.png" sizes="32x32" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-16x16.png" sizes="16x16" />
				<link rel="icon" type="image/png" href="/articles/theme/favicon/favicon-128.png" sizes="128x128" />
				<meta name="application-name" content="Marko Samastur"/>
				<meta name="msapplication-TileColor" content="#FBF8E9" />
				<meta name="msapplication-TileImage" content="/articles/theme/favicon/mstile-144x144.png" />
				<meta name="msapplication-square70x70logo" content="/articles/theme/favicon/mstile-70x70.png" />
				<meta name="msapplication-square150x150logo" content="/articles/theme/favicon/mstile-150x150.png" />
				<meta name="msapplication-wide310x150logo" content="/articles/theme/favicon/mstile-310x150.png" />
				<meta name="msapplication-square310x310logo" content="/articles/theme/favicon/mstile-310x310.png" />

        <style>
/*
 * Icecream theme by Marko Samastur (markos@gaivo.net)
 *
 *
 * Color palette:
 * - dark blue: #30303c
 * - light yellow: fbf8e9
 * - link red: #980000
 * - link orange: #ffb665
 */
*{box-sizing:border-box}html,body{padding:0;margin:0;height:100%}body{position:relative;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:300;font-size:18px;line-height:1.333333}section,article,aside,header,footer{display:block}h1,h2,h3,h4,h5,h6{margin:1.5em 0;font-size:1.777777em;font-weight:200;line-height:1.5}a:visited,a{text-decoration:none}a:hover{text-decoration:underline}a img{border:0;margin-top:6px}img{max-width:100%}.envelope{position:relative;max-width:60em;width:calc(100% - 2em);margin:2em auto 0;padding:0 0 8em}body > footer{position:fixed;bottom:0;width:100%;height:6em;margin:0;padding:.5em 1em 0;font-size:.8em;text-align:center}body > footer ul{list-style-type:none;margin:0;padding:0}body > footer li{margin:.25em 0}@media (min-device-width:600px){body > footer{height:3em;text-align:left}body > footer ul{display:inline-block}body > footer li{display:inline-block;margin:.5em 2em 0 0}body > footer .mini-logo{float:right}}.about h1{margin:0}.about h2{margin-bottom:0}.about p{margin:1.333333em 0}aside{margin-bottom:2.666666em}aside .photo{max-width:100%;max-height:11.2em;margin:0 1em 8px 0;padding:3px}aside ul{list-style-type:none;margin:0 0 1.333333em;padding:0;overflow:hidden}aside .vcard li{float:none;margin:0}aside li{float:left;margin:.25em 8px 0 0.1em}aside p{margin:0}aside a.email{padding-left:20px;background:url(../img/email-16x16.png) no-repeat 0 0}aside a.website{padding-left:20px;background:url(../img/website-16x16.png) no-repeat 0 0}.elsewhere-links{padding:0 0 0 .5em;list-style-type:inherit}.elsewhere-links > li{float:none;list-style-type:'- '}@media (min-device-width:600px){aside{float:right;width:30%}.about{width:62%;max-width:60em}}body > header h1{font-size:1em;margin:0;padding:.666666em 1em;line-height:1}.post-text h2,.post-text h3{margin:1em 0;font-size:1.333333em;line-height:1}.post .entry-title{margin:1.3333333em 0 0}.post p{margin:1.333333em 0}.post .post-info ul{margin:0 0 2.666666em;padding-left:0}.post .post-info li{list-style-type:none}.post > footer li{font-variant:small-caps}@media (min-device-width:600px){.post .post-info{float:right;width:30%;margin-top:o}.post .post-info ul{margin-bottom:0}.post .post-text,.post #isso-thread{width:62%;max-width:60em}.post p:first-child{margin-top:0}}.posts h1{margin-bottom:0}.colophon h1{margin-top:0;font-size:1em;font-weight:300;line-height:1.333333;font-variant:small-caps}.colophon ul{list-style-type:none;margin:1.333333em 0;padding:0}.posts .entry-title{margin:2.666666em 0 0;font-size:1.333333em;line-height:1}.posts p{margin:1.333333em 0}.post-metadata ul{margin:1.333333em 0;padding-left:0;opacity:.8}.post-metadata li{list-style-type:none;display:inline-block;font-style:italic}.post-metadata li:first-child:after{content:" |"}.posts .paginator{margin-top:2.666666em;padding-left:0;text-align:center}.paginator li{list-style-type:none;display:inline-block;margin:0 .5em}@media (min-device-width:600px){.colophon{float:right;width:30%;margin-top:0}.hentry{width:62%;max-width:60em}nav + .hentry .entry-title{margin-top:0}}.error{text-align:left}.error img{max-width:100%;padding:3px}.imageR img{float:right;margin:.7em 0 .7em 1.5em;padding:3px}.imageL img{float:left;margin:.7em 1.5em .7em 0;padding:3px}.zemanta-related-title{font-size:1em;margin:2.8em 0 0}.zemanta-img .wp-caption{margin:0 0 0 1.5em}.zemanta-img img{padding:3px}.zemanta-pixie{display:none}.alignleft{float:left}.alignright{float:right}.aligncenter{text-align:center;max-width:100%}.alignleft img,img.alignleft,.alignright img,img.alignright,.aligncenter img,img.aligncenter{padding:3px}ol.code{font:normal 95%/110% Andale Mono,Courier,monospace;padding:5px;text-align:left}ol.code code{font:normal 98%/110% Andale Mono,Courier,monospace}.code li.tab1{padding-left:1em}.code li.tab2{padding-left:2em}.code li.tab3{padding-left:3em}.code li.tab4{padding-left:4em}.code li.tab5{padding-left:5em}.code li.tab6{padding-left:6em}.code li.download,.code li:nth-last-child(2){list-style-type:none}.highlight pre{overflow:auto}				</style>

				<style type="text/css" title="Light theme">
body {background-color: #fbf8e9;color: #30303c;}
body > footer a, body > footer a:visited {color: #ffb665;}
a, a:visited, a:hover {color: #980000;}
body > footer {background-color:#30303c;color:#fbf8e9;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;border:1px solid #30303c;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #30303c;}
ol.code {border: 1px solid #30303c;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_dark_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

				<style type="text/css" title="Dark theme">
body {background-color: #30303c;color: #fbf8e9;}
body > footer a, body > footer a:visited {color: #980000;}
a, a:visited, a:hover {color: #ffb665;}
body > footer {background-color:#fbf8e9;color:#30303c;}
aside .photo, .error img, .alignleft img, img.alignleft, .alignright img, img.alignright, .aligncenter img, img.aligncenter,
.zemanta-img img, .imageR img, .imageL img {background-color:#fbf8e9;}
.post header h1, .posts header h1, .posts > header h1 {border-bottom:1px solid #fbf8e9;}
ol.code {border: 1px solid #fbf8e9;}
body > footer .mini-logo {display: inline-block;width:97px;height:32px;border:0;background:url(theme/img/markos_light_small_bg.png);overflow:hidden;text-indent:-400px;}
				</style>

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />
</head>

<body>


<section class="envelope posts">
    <header>
        <h1><a href="./">A notch above a monkey <strong></strong></a></h1>
    </header><!-- /#banner -->

    <nav class="colophon">
        <h1>By Marko Samastur</h1>
        <ul>
            <li><a href="/">About me</a></li>
            <li><a href="/articles/feeds/atom.xml">Subscribe</a></li>
        </ul>
    </nav>

        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="./preventing-javascript-download-on-mobile-web.html" rel="bookmark" title="Permalink to Preventing download of javascript on mobile web">Preventing download of javascript on mobile web</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  Every year I spend a few weeks somewhere where internet connection is either slow or metered and expensive. Usually it’s both which makes me rather twitchy when it comes to big web page sizes. Yet I’m also certain that my new web home, however it may turn out at the end, will have a significant chunk of it written in Javascript. None of it necessary for working, but more than I’d probably like to download over flimsy mobile phone connection.
 </p>
 <p>
  The problem are not really old mobile browsers which don’t support Javascript. They won’t download any of it anyway. The question is how to prevent eager browsers, who would, from downloading this stuff when you don’t want them to. My first, rather primitive attempt was
  <a href="http://markos.gaivo.net/examples/envcheck/index.html" title="Demo of javascript ondemand loading depending on media">
   this demonstration
  </a>
  , which only works in Opera 9, Safari and Firefox, but most certainly doesn’t work in all browsers.
 </p>
 <p>
  What it does is check font size of a title and based on its value resolves which media style sheet was used. If it was
  <em>
   mobile.css
  </em>
  , which is used only when media is set to
  <em>
   handheld
  </em>
  , then it was probably done from a mobile environment, so it includes the mobile version of a Javascript or it could, if I wanted, none at all.
 </p>
 <p>
  There are several problems with this approach. First one is that it doesn’t recognize notebook users connecting over a  cellphone. It can’t really, since browser environment is literally the same, unless it would try to measure latency and bandwidth of page elements and guess from those results, which is neither easy nor reliable. 3G networks can be rather fast and have a better latency than a wired connection from somewhere like Tanzania.
 </p>
 <p>
  But let’s say we don’t care about this case. We can always turn Javascript off in Firefox if it’s important enough to us, which leads us to the next problem. Support for handheld media type is still rather spotty. If browser doesn’t support it, it may load the wrong style sheet if any at all and the wrong CSS value results in wrong turn in Javascript. However
  <em>
   handheld media
  </em>
  support is getting better. Since I decided from the start that my personal page is a good place where leading edge can also be a bit of bleeding one, that is good enough. On a different site this probably wouldn’t be true.
 </p>
 <p>
  So it sort of works in principle, but it is crude and error prone. Javascript check is not self-contained and I could easily break it by changing font size value of a title in CSS files while forgetting to do a corresponding correction in code. What would be much better is to learn from the browser which media types style sheets were actually used and act accordingly. Now that would be grand.
 </p>
 <p>
  There are two ways you could go about this. My first go was finding style nodes in DOM and looking at their
  <em>
   disabled
  </em>
  property, which is commonly used in style sheet switchers for turning sheets on and off. It doesn’t work, since ‘wrong’ media types in Firefox are ignored, not disabled. Their
  <em>
   disabled
  </em>
  value is still set to
  <em>
   false
  </em>
  .
 </p>
 <p>
  A proper way of doing it would be using DOM Style Sheets methods. Basic idea is to compare actual values as set in the page with values read from style sheets and resolving which ones were used. While not exactly trivial, by little forethought it can be made to work fine in Opera and Firefox. It can also work in Explorer using its own methods, but it’s a pain to make it  work in Safari, which in this case is not only an incompetent liar, it’s also lying in some weird accent. If you’d like to learn more about it, then there’s a
  <a href="http://www.howtocreate.co.uk/tutorials/javascript/domstylesheets" title="Problems with DOM Style Sheets use">
   great
  </a>
  page describing current state but the gist of it is that you can’t rely on methods being there and even when they are, in some form or another, they might not work reliably (Safari) or might produce weird results (yup, Safari again).
 </p>
 <p>
  Well, it could still work, but would require an unreasonable amount of code. Hence I made a different tradeoff, which can be seen
  <a href="http://markos.gaivo.net/examples/envcheck/index2.html" title="Second attempt">
   here
  </a>
  . A bit less automation for a lot less code. It keeps the idea of first demo with a small twist. First rule of every media style sheet targets the same element that gets created by Javascript if necessary and compares its font size value with those found in style sheets. It returns media types of all sheets where this value was found.
 </p>
 <p>
  The end result certainly isn’t perfect or pretty, but it keeps amount of bookkeeping to minimum and limited to CSS files. Even using a “safe” property like font size can lead to problems (e.g. 0.9em is sometimes interpreted as 0.90em), but nothing difficult to overcome.
 </p>
 <p>
  It might not be of production quality, but it will work as good starting point for further exploration.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-10-29T21:55:00+01:00">Sun 29 October 2006</time> </li>
                    <li><a href="./preventing-javascript-download-on-mobile-web.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="./back.html" rel="bookmark" title="Permalink to Back">Back</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  There’s hardly a worse way to end a vacation than catching a flu. There are also better starts to flu then midnight spells of vomiting, when your stomach is completely empty. All you do is spit acid and brush teeth afterwards in hope they might stick around a bit longer.
  <a class="imageR" href="http://www.marela.si/photos/9688/">
   <img alt="Anchor on Zanzibar beach" src="http://static.marela.si/users0/markos/2/3k3Jipz--q6-zqjBRiYviLMzibE.jpg"/>
  </a>
  <br/>
  The good thing is that it beats catching malaria, which I hopefully didn’t, and that it only gets better onwards. I seem to be left only with a slight cold and a nasty
  <strong>
   *censored*
  </strong>
  problem that I’m hoping will disappear in next few days. I’m almost through my unread emails as well so if you’ve sent me something and haven’t heard from me yet, this would be a good time to send me a reminder.
  <br/>
  This vacation has been very much unlike the others. It was the first time in years, well, since I started working really, that I didn’t work at all while being on vacation. I didn’t think of work either, an odd experience I enjoyed with gusto.
  <br/>
  Still, a long way home provided ample opportunity for reflection, hazy thoughts and dubious decisions one of which is that I’m going to rewrite this site and create my own publishing platform, which will be better suited than those known to me for things I need and things I’d like to try out.
  <br/>
  I’ve also given myself a deadline, a year, in which to come up with this thing. A deadline that I think provides enough time to hope for sucess and not enough to slack.
  <br/>
  What won’t change is the low frequency of my posts, a belief strengthened by wading through hundreds of unread posts accumulated in my feed reader while I was gone, majority of which being little more than a waste of time. But who am I to complain.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-10-18T22:17:00+02:00">Wed 18 October 2006</time> </li>
                    <li><a href="./back.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>
        <article class="hentry">
            <h1 class="entry-title storytitle"><a href="./hyperscope-and-my-blogs-evolution.html" rel="bookmark" title="Permalink to HyperScope and my blog's evolution">HyperScope and my blog's evolution</a></h1>

            <div class="entry-content post-text">
                <div>
 <p>
  I’ve been writing less lately, which had little to do with summer laziness and more with me thinking about publishing on the web.
 </p>
 <p>
  Many have said that Internet (or Web) is not a television, but neither is it a magazine or a book. Yet I find myself again and again leaning on preconceptions picked up from my favorite medium. So this summer has been spent exploring my preconceived notions and trying to find out which of them still make sense on the web and how to tackle those which don’t.
 </p>
 <p>
  And the result of this exploration? I still don’t like WordPress, so I might go about writing my own publishing platform which would offer me an opportunity to test some of newfound ideas. Or I won’t, recognizing vast amount of time needed and I’ll end up only writing an article or two. But what I’m certain I will do is write less.
 </p>
 <p>
  In a world where every monkey can publish so almost every one of us eventually does restraint is a virtue. There were too many posts that neither benefited me nor those who came across them. Maybe I won’t change the signal-noise ratio, but I will put less crap out there in absolute terms.
 </p>
 <p>
  Related to all these thinking is a recent announcement of
  <a href="http://hyperscope.org/">
   HyperScope
  </a>
  . Doug Engelbart’s vision of
  <a href="http://hyperscope.org/hyperscope/src/demos/augment-132082.opml">
   Open Hyperdocument System
  </a>
  (link may not work in every browser) has been a source of many ideas this summer and it’s certainly nice to finally have available a system to test at least some of them.
 </p>
</div>
            </div><!-- /.entry-content -->

            <footer class="post-metadata">
                <ul>
                    <li>Published on <time datetime="2006-09-07T14:07:00+02:00">Thu 07 September 2006</time> </li>
                    <li><a href="./hyperscope-and-my-blogs-evolution.html">Add your comment</a></li>
                </ul>
            </footer>
        </article>

<ul class="paginator">
		<li class="newer">
        <a href="./index52.html">&laquo; Newer</a>
		</li>
		<li class="current">
    53 / 119
		</li>
		<li class="older">
        <a href="./index54.html">Older &raquo;</a>
		</li>
</ul>
</section><!-- /#content -->

    <footer>
        <ul>
            <li>&copy; 2005-2020 Marko Samastur</li>
						<li><a href="/articles/privacy-policy.html">Privacy policy</a></li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/" class="mini-logo">Back to homepage</a>
    </footer>
</body>
</html>