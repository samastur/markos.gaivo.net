<!DOCTYPE html>
<html lang="en">
<head>
	<title>A notch above a monkey &raquo; bisect and subpar modules</title>
	<meta charset="utf-8" />
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 

	<link rel="shortcut icon" href="/img/markos.ico" />
	
	<meta name="generator" content="WordPress 3.0.5" /> <!-- leave this for stats please -->

	<link href="http://fast.fonts.com/cssapi/aee9b60b-8e94-47f8-b586-3ecbfab51d1c.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="css/home.css" media="screen" title="Light theme" />
	<link rel="alternate stylesheet" type="text/css" href="css/home_dark.css" media="screen" title="Dark theme" />
	<link rel="stylesheet" href="css/ipad.css" media="only screen and (min-device-width : 768px) and (max-device-width : 1024px)">
	<link rel="stylesheet" type="text/css" href="css/smallscreen.css" media="only screen and (max-width: 700px)" />

	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://markos.gaivo.net/blog/?feed=rss2" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="http://markos.gaivo.net/blog/?feed=atom" />
	<link rel='canonical' href='http://markos.gaivo.net/blog/?p=664' />

	<link rel="pingback" href="http://markos.gaivo.net/blog/xmlrpc.php" />

	<link rel="alternate" type="application/rss+xml" title="A notch above a monkey &raquo; bisect and subpar modules Comments Feed" href="http://markos.gaivo.net/blog/?feed=rss2&amp;p=213" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://markos.gaivo.net/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://markos.gaivo.net/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='A notch above a monkey' href='http://markos.gaivo.net/blog' />
<link rel='start' title='First post' href='http://markos.gaivo.net/blog/?p=2' />
<link rel='prev' title='Nokia 770 Internet Tablet' href='http://markos.gaivo.net/blog/?p=212' />
<link rel='next' title='Change' href='http://markos.gaivo.net/blog/?p=214' />
<meta name="generator" content="WordPress 3.0.5" />
<link rel='canonical' href='http://markos.gaivo.net/blog/?p=213' />

	<!--[if lt IE 9]>
	<script src="/js/html5.js"></script>
	<![endif]-->
</head>
<body>
					<header>
		<h1><a href="/blog/">A notch above a monkey</a> &raquo; bisect and subpar modules</h1>
	</header>

	<section class="envelope">
		<article class="post">
			<header>
				<h1>bisect and subpar modules</h1>
			</header>

			<footer>
				<ul>
					<li class="by">Written by: <a href="/">Marko Samastur</a></li>
					<li class="published">Published on: <time datetime="2006-12-07T23:36:34+00:00" pubdate>December 7, 2006</time></li>
					<li class="categories">Categories: <a href="http://markos.gaivo.net/blog/?cat=2" title="View all posts in Python" rel="category">Python</a></li>
					<li class="post-comments">Comments: <a href="http://markos.gaivo.net/blog/?p=213#comments" title="Comment on bisect and subpar modules">5</a></li>
				</ul>
			</footer>

			<div class="post-text">
				<p>I was talking to a colleague yesterday, who&#8217;s a recent Python convert and he was explaining to me which parts of Python are not to his liking. Mostly he had reasonable objections.</p>
<p>I can understand his wish for strong typing, but since lack of it is not a problem that affected me yet, I&#8217;m not bothered by it. I&#8217;ll take his word that objects pickled on Windows are not transferable to Linux and that certainly can suck. But it was probably the smallest problem that resonated the strongest with me, since it was something that has annoyed me previously.</p>
<p>Bisect module doesn&#8217;t let you specify comparison function. It obviously doesn&#8217;t need to, since you can define your own comparison methods on your classes, but still, it would be nice if its documentation included a hint for those who won&#8217;t look at module&#8217;s code or think of simply trying. You know, people like me.</p>
<p>It got me thinking that I don&#8217;t find all modules in standard library of the same quality and I suspect I&#8217;m not the only one. I don&#8217;t mean to or honestly can disparage anyone, since I haven&#8217;t seen any code in standard library that would be worse than mine.</p>
<p>Still, which modules do you think would benefit from some work and how could an eager person, with some time on his hands, help them improve?</p>
			</div>

			<nav>
				<p>If you liked this, you might want to visit:</p>
				<ul>
					<li>my previous article: <a href="http://markos.gaivo.net/blog/?p=212" rel="prev">Nokia 770 Internet Tablet</a></li>					<li>my next article: <a href="http://markos.gaivo.net/blog/?p=214" rel="next">Change</a></li>					<li><a href="/blog/">article list</a></li>
				</ul>
			</nav>

			<h2 id="comments">Comments (5)
			</h2>
			<ol class="comments">
		
				<li id="comment-17674">
					<article>
						<p>I think it&#8217;s important to point out that the general consensus is that Python *is* strongly typed, it&#8217;s just not statically typed. Major difference between the two.</p>
						<footer>
							<cite>Comment by <a href='http://jayparlar.com' rel='external nofollow' class='url'>Jay P</a> &#8212; <time datetime="2006-12-08T00:16:26+00:00">December 8, 2006 @ 12:16 am</time> <a href="#comment-17674">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-17687">
					<article>
						<p>There are ways to add forms of static typing to python, which involve decorators and meta classes. Python allows for this type of extension.</p>
<p>Zope Interfaces (a sub-package which can be down loaded seperatly from the rest of Zope) give you all teh code you need to implement static typing on function and method API&#8217;s. </p>
<p>Django, SQLAlchemy and other DB ORM&#8217;s contain static typing examples on class attributes.</p>
<p>We use similar systems at work which give us full type safty in python for our result objects and API&#8217;s which are implemented 100% in python. There is an overhead involved, so it is only used when -O is not supplied (i.e. debug python). We do this because these classes and functions are entrypoint wrappers or return objects from out C/API. It is cheaper and easier to implement the type safty on the python side. We also disable pickling and the ability to assign any variable name (because some of the information is ram stateful, etc).</p>
<p>On pickling, look at the optional pickle level. It defaults to he highest, most compressed form which is OS dependent. Other PICKLE levels are NOT OS dependent! (but they are slower and take up more disk.</p>
						<footer>
							<cite>Comment by Doug Napoleone &#8212; <time datetime="2006-12-08T00:42:34+00:00">December 8, 2006 @ 12:42 am</time> <a href="#comment-17687">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-17839">
					<article>
						<p>The pickle docs show no indication that any of the protocols are OS-dependent. They are Python-version dependent though. If it&#8217;s true that the highest level is OS-dependent (although I&#8217;ve never had any problems), then the docs need to be updated.</p>
<p>A comparison function for bisect would be useful where you can&#8217;t modify the object&#8217;s class, such as if you have a list of numbers in reverse order. Granted, for performance reasons you may be better off using some trick involving tuples.</p>
						<footer>
							<cite>Comment by jml &#8212; <time datetime="2006-12-08T05:57:48+00:00">December 8, 2006 @ 5:57 am</time> <a href="#comment-17839">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-17994">
					<article>
						<p>Marko misunderstood me about pickling. It is not pickling itself that is problematic, it is th &#8220;b&#8221; parameter of opening a file for reading/writing. </p>
<p>If someone produces a file under windows without &#8220;b&#8221; parameter, that pickle file can not be read on Linux. The file becomes useless. At least some kind of &#8220;emulation&#8221; for reading files produced by windows would be needed &#8211; or maybe raising an exception under windows when using file opened like that for pickling. And problem should be documented inside pickle module, where it is not.</p>
<p>The problem about bisection is bigger than marko understands it. If you have a class and you want to use one of the fields for bisection, you need to overload __cmp__, but if you do that you basically cannot compare two objects &#8220;normally&#8221; anymore. This has led me me to go for really stupid workarounds. A key or cmp parameter is needed for bisection to get around that. </p>
<p>Another low quality module is heapq. There is no merge operation to merge two heaps. And there are other things missing &#8211; like poping the biggest element from heap (not trivally doable, but if you have nlargest, you should also have that!)</p>
<p>Yes, i was talking about static typing (though i mixed it up while talking to marko). My problem is that after 20 minutes of computation, python reports that i mistyped the name of the parameter when i tried to output the result. I fix it, and start computation again, and afer 20 minutes python merrily tells me that I also mistyped some other variable. Total nightmare when working with software that takes a lot of computational time. This type of typing comes into play even without typing of classes&#8230;</p>
<p>There are other possible solutions to this last problem &#8211; for example &#8220;Edit and continue&#8221; paradigm of Visual Studio that would spare A LOT of time lost because of typing mistakes. I am now doing this manually using pickles&#8230; but it just takes time (and pickling of large object collections is really slow&#8230;).</p>
						<footer>
							<cite>Comment by minmax &#8212; <time datetime="2006-12-09T15:06:20+00:00">December 9, 2006 @ 3:06 pm</time> <a href="#comment-17994">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-18020">
					<article>
						<p>I think a more precise term would be static binding, since it&#8217;s the variable name that you want to be statically checked. Python&#8217;s dynamic binding doesn&#8217;t make it easy to do this unfortunately, especially across modules. Restricting dynamic binding would make static type analysis a lot more reliable.</p>
<p>For now, a simple solution might be something like pylint/pychecker &#8212; although I don&#8217;t know if they&#8217;re still updated. Those types of tools can be a lot stricter than standard Python, since you also have more control. At least for catching typos.</p>
<p>Edit-and-continue would be pretty nice too.</p>
						<footer>
							<cite>Comment by jml &#8212; <time datetime="2006-12-09T19:48:12+00:00">December 9, 2006 @ 7:48 pm</time> <a href="#comment-18020">#</a> </cite>
						</footer>
					</article>
				</li>
		
			</ol>


		<p>Sorry, the comment form is closed at this time.</p>

		</article>
	</section>
			<!-- All pages -->
	

	<footer>
		<ul>
			<li>&copy; 2005-2015 Marko Samastur</li>
			
			<li><a href="http://markos.gaivo.net/blog/?feed=rss2">Entries feed</a></li>
			<li><a href="http://markos.gaivo.net/blog/?feed=comments-rss2">Comments feed</a></li>
		</ul>
		<a href="/"><img src="/img/markos_light_small_bg.png" alt="logo" class="mini-logo" /></a>
	</footer>
	<!-- Google analytics -->
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-152438-1']);
	  _gaq.push(['_trackPageview']);
	</script>
	<script src="/js/cookie.js"></script>
</body>
</html>
