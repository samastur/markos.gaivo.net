<!DOCTYPE html>
<html lang="en">
<head>
	<title>A notch above a monkey &raquo; Auto-grow TEXTAREA</title>
	<meta charset="utf-8" />
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 

	<link rel="shortcut icon" href="/img/markos.ico" />
	
	<meta name="generator" content="WordPress 3.0.5" /> <!-- leave this for stats please -->

	<link href="http://fast.fonts.com/cssapi/aee9b60b-8e94-47f8-b586-3ecbfab51d1c.css" rel="stylesheet" type="text/css" />
	<link rel="stylesheet" type="text/css" href="css/home.css" media="screen" title="Light theme" />
	<link rel="alternate stylesheet" type="text/css" href="css/home_dark.css" media="screen" title="Dark theme" />
	<link rel="stylesheet" href="css/ipad.css" media="only screen and (min-device-width : 768px) and (max-device-width : 1024px)">
	<link rel="stylesheet" type="text/css" href="css/smallscreen.css" media="only screen and (max-width: 700px)" />

	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://markos.gaivo.net/blog/?feed=rss2" />
	<link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="http://markos.gaivo.net/blog/?feed=atom" />
	<link rel='canonical' href='http://markos.gaivo.net/blog/?p=664' />

	<link rel="pingback" href="http://markos.gaivo.net/blog/xmlrpc.php" />

	<link rel="alternate" type="application/rss+xml" title="A notch above a monkey &raquo; Auto-grow TEXTAREA Comments Feed" href="http://markos.gaivo.net/blog/?feed=rss2&amp;p=198" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://markos.gaivo.net/blog/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://markos.gaivo.net/blog/wp-includes/wlwmanifest.xml" /> 
<link rel='index' title='A notch above a monkey' href='http://markos.gaivo.net/blog' />
<link rel='start' title='First post' href='http://markos.gaivo.net/blog/?p=2' />
<link rel='prev' title='Accessible DHTML and other bits' href='http://markos.gaivo.net/blog/?p=197' />
<link rel='next' title='Marela widgets I' href='http://markos.gaivo.net/blog/?p=199' />
<meta name="generator" content="WordPress 3.0.5" />
<link rel='canonical' href='http://markos.gaivo.net/blog/?p=198' />

	<!--[if lt IE 9]>
	<script src="/js/html5.js"></script>
	<![endif]-->
</head>
<body>
					<header>
		<h1><a href="/blog/">A notch above a monkey</a> &raquo; Auto-grow TEXTAREA</h1>
	</header>

	<section class="envelope">
		<article class="post">
			<header>
				<h1>Auto-grow TEXTAREA</h1>
			</header>

			<footer>
				<ul>
					<li class="by">Written by: <a href="/">Marko Samastur</a></li>
					<li class="published">Published on: <time datetime="2006-07-31T13:58:05+00:00" pubdate>July 31, 2006</time></li>
					<li class="categories">Categories: <a href="http://markos.gaivo.net/blog/?cat=1" title="View all posts in Javascript" rel="category">Javascript</a>, <a href="http://markos.gaivo.net/blog/?cat=7" title="View all posts in UI" rel="category">UI</a>, <a href="http://markos.gaivo.net/blog/?cat=4" title="View all posts in Web" rel="category">Web</a></li>
					<li class="post-comments">Comments: <a href="http://markos.gaivo.net/blog/?p=198#comments" title="Comment on Auto-grow TEXTAREA">21</a></li>
				</ul>
			</footer>

			<div class="post-text">
				<p><em><strong>Update 6.8.2009:</strong> This post is old and somewhat obsolete, but has been kept alive by commentators. Hence I posted an updated version of the script in comments.</em></p>
<p><a href="http://friedcellcollective.net/outbreak/">Fry</a> recently mentioned a TEXTAREA improvement he found. As you type your text in the box, it grows in length as needed to avoid having to deal with scroll bars.</p>
<p>I liked the idea and went to create my own version. Making it work in Internet Explorer and Firefox was literally a matter of seconds. All you really need to do is compare elements <em>clientHeight</em> with its <em>scrollHeight</em> on key presses and increment <em>rows</em> attribute when former is smaller than later.</p>
<p>But supporting Opera and Safari has proven to be an insurmountable task for now. They simply don&#8217;t seem to update any property that could reliably be used for measuring the height of the text (but would love to be proven wrong).</p>
<p>You can try a <a href="http://markos.gaivo.net/examples/growtextarea/index.html">demo</a>, which also doubles as a test environment for reading interesting attributes on the fly (updates are done with mouse over input box).</p>
<p>Random bits of observation:</p>
<ul>
<li><em>scrollHeight</em> is always bigger than <em>clientHeight</em> in Opera. Hence the need to ignore it using its unique fingerprint.</li>
<li>I didn&#8217;t try to work out the length of the text by trying to count the number of lines (using <em>\n</em>) and the length of each of them. Proportional fonts prevent any such reasonable guess.</li>
<li>I didn&#8217;t try to limit the growth of the box to the boundaries of the screen. I find page scroll bars the least annoying when scroll bars can&#8217;t be avoided. It&#8217;s a personal choice though.</li>
</ul>
			</div>

			<nav>
				<p>If you liked this, you might want to visit:</p>
				<ul>
					<li>my previous article: <a href="http://markos.gaivo.net/blog/?p=197" rel="prev">Accessible DHTML and other bits</a></li>					<li>my next article: <a href="http://markos.gaivo.net/blog/?p=199" rel="next">Marela widgets I</a></li>					<li><a href="/blog/">article list</a></li>
				</ul>
			</nav>

			<h2 id="comments">Comments (21)
			</h2>
			<ol class="comments">
		
				<li id="comment-10438">
					<article>
						<p>Thks!!!. I want an interface like Netvibes&#8230;this article was the solution for the Notes section&#8230;</p>
						<footer>
							<cite>Comment by <a href='http://NA' rel='external nofollow' class='url'>Optimcol</a> &#8212; <time datetime="2006-10-24T07:22:08+00:00">October 24, 2006 @ 7:22 am</time> <a href="#comment-10438">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-13974">
					<article>
						<p>I myself is developing one of this also, however,the scroll bar will still show on pressing enter key, therefore, it&#8217;s better increase the height value when enter key is down(e.keyCode == 13).</p>
<p>In my case, I use style.height instead of cols&#8230;.</p>
						<footer>
							<cite>Comment by Stanoo Chang &#8212; <time datetime="2006-11-17T13:32:56+00:00">November 17, 2006 @ 1:32 pm</time> <a href="#comment-13974">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-114930">
					<article>
						<p>I know this is an ancient post, but I wanted to add that I&#8217;m having the same problem with Opera and Konqueror. But there is a way to have the script working for the other browsers without needeing to make a special case to ignore Opera by comparing scrollHeight and offsetHeight rahter than clientHeight.</p>
						<footer>
							<cite>Comment by <a href='http://detyabozhye.com' rel='external nofollow' class='url'>Lyosha</a> &#8212; <time datetime="2008-02-22T00:52:20+00:00">February 22, 2008 @ 12:52 am</time> <a href="#comment-114930">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-190022">
					<article>
						<p>Hi!</p>
<p>Old post I know, and you&#8217;ve maybe moved on &#8211; but this was the starting point for just what I was looking for. I didn&#8217;t want to go down the mootools or jquery route because I have a lightweight form deployable over a mobile network and I wanted as little code as possible.</p>
<p>Anyway &#8211; the flaw in your demo code is that it does not shrink after you delete text! If you type a lot and then delete it, you end up with an over size empty box.</p>
<p>So the following addition when fix that:</p>
<p>function grow() {<br />
  if (this.scrollHeight &gt; this.clientHeight ){<br />
	this.rows += 1;<br />
  }</p>
<p>  if (this.clientHeight &gt; this.scrollHeight ){<br />
	this.rows -= 1;<br />
  }<br />
}</p>
<p>It&#8217;s not perfect though!</p>
						<footer>
							<cite>Comment by <a href='http://kierandelaney.net' rel='external nofollow' class='url'>Kieran Delaneu</a> &#8212; <time datetime="2009-04-03T15:47:02+00:00">April 3, 2009 @ 3:47 pm</time> <a href="#comment-190022">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-190023">
					<article>
						<p>Also forget to mention:</p>
<p>With a shrinking text box you need to be aware that onkeypress does not register backspace or delete keystrokes. This is obviously an issue because backspacing and deleting text does not fire the shrinking check.</p>
<p>Instead you should use onkeydown which registers all keystrokes.</p>
<p>document.getElementById(&#8220;grower&#8221;).onkeydown = grow;</p>
						<footer>
							<cite>Comment by <a href='http://kierandelaney.net' rel='external nofollow' class='url'>Kieran Delaneu</a> &#8212; <time datetime="2009-04-03T15:52:58+00:00">April 3, 2009 @ 3:52 pm</time> <a href="#comment-190023">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-192801">
					<article>
						<p>Hi,</p>
<p>is there a way that a textarea auto-grows in a horizontal way?</p>
						<footer>
							<cite>Comment by <a href='http://-' rel='external nofollow' class='url'>Wilco Janssen</a> &#8212; <time datetime="2009-05-12T11:19:50+00:00">May 12, 2009 @ 11:19 am</time> <a href="#comment-192801">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-192891">
					<article>
						<p>@Wilco: Yes. It should be enough to extend grow function with another if statement, where you replace Height with Width (e.g. scrollHeight becomes scrollWidth) and this.rows with this.cols.</p>
<p>Side effect of this would be that textarea would stretch wider until you pressed Enter to skip to new line.</p>
<p>@Kieran: Thanks for your comment. Demo is indeed incomplete.</p>
						<footer>
							<cite>Comment by <a href='http://markos.gaivo.net' rel='external nofollow' class='url'>markos</a> &#8212; <time datetime="2009-05-13T06:28:21+00:00">May 13, 2009 @ 6:28 am</time> <a href="#comment-192891">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-194538">
					<article>
						<p>The answer is simple:</p>
<p>// JavaScript //<br />
textarea = new Object();</p>
<p>	textarea.expand = function(input){</p>
<p>		input.style.height = 0;<br />
		input.style.height = (input.scrollHeight) + &#8216;px&#8217;;</p>
<p>	}</p>
<p>// HTML //<br />
your text dynamically expands AND skrinks</p>
						<footer>
							<cite>Comment by Michael McNally &#8212; <time datetime="2009-06-04T04:10:09+00:00">June 4, 2009 @ 4:10 am</time> <a href="#comment-194538">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-194539">
					<article>
						<p>Sorry&#8230;the html was destroyed in my last message&#8230;here is is:</p>
<p>// HTML //<br />
&lt;textarea onkeyup=&#8221;textarea.expand(this);&#8221;&gt;your text here&lt;/textarea&amp;gt</p>
						<footer>
							<cite>Comment by Michael McNally &#8212; <time datetime="2009-06-04T04:12:16+00:00">June 4, 2009 @ 4:12 am</time> <a href="#comment-194539">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-197156">
					<article>
						<p>Here&#8217;s an AutoGrow plugin I did for MooTools. It works in Safari.</p>
<p><a href="http://mccull.org/gary/autogrow/">http://mccull.org/gary/autogrow/</a></p>
						<footer>
							<cite>Comment by <a href='http://bookballoon.com' rel='external nofollow' class='url'>Gary Glass</a> &#8212; <time datetime="2009-07-03T18:12:37+00:00">July 3, 2009 @ 6:12 pm</time> <a href="#comment-197156">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-199220">
					<article>
						<p>Thanks!   I love this very simple and robust solution!<br />
However, I have a few suggestions:</p>
<p>1.  Consider replacing your &#8220;if&#8221; with a &#8220;while&#8221; loop.   Normally this won&#8217;t matter, but if you cut and paste text into a text-area, or if your web-app already had lots of text in their then the if statement will only allow it to grow by one line instead of growing to fit.</p>
<p>2.  Consider using &#8220;onkeyup&#8221; rather than &#8220;onkeypress&#8221;.   When I tested this on Firefox, the scroll bar is there after I press the return key, because of the order in which the client area is updated.  &#8220;onkeyup&#8221; seems to produce cleaner results IMHO.</p>
<p>Thanks!<br />
Chad</p>
						<footer>
							<cite>Comment by <a href='http://vavoca.com' rel='external nofollow' class='url'>Chad Lester</a> &#8212; <time datetime="2009-07-30T20:23:23+00:00">July 30, 2009 @ 8:23 pm</time> <a href="#comment-199220">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-199673">
					<article>
						<p>Thank you for the post!! It is very helpful.<br />
I tested the enhancement that said Kieran Delaneu (to shrink the textarea), it worked in explorer but not in firefox. Do anyone know why? Thanks in advance!!</p>
						<footer>
							<cite>Comment by Sandy &#8212; <time datetime="2009-08-05T19:13:43+00:00">August 5, 2009 @ 7:13 pm</time> <a href="#comment-199673">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-199764">
					<article>
						<p>I&#8217;m glad to see increased interest in this old post and there were many suggestions, some of which don&#8217;t work too well in practice.</p>
<p>Hence I wrote a second version of script, which I tested on IE7, FF3, Opera10 and Safari4, incorporating ideas from comments.</p>
<p>You can find and test it <a href="http://markos.gaivo.net/examples/growtextarea/grow.html">here</a>.</p>
<p>I&#8217;ve made few changes. Textarea should now not only grow, but also shrink and should work fine even if text as been pasted into it.</p>
<p>I would also like to call attention to another change I did, which is that new function returns an event handler for mouseup and is not a handler function as such.</p>
<p>To use you have to instantiate it like I did in example. You can provide a row limit under which it won&#8217;t shrink, which is 5 by default.</p>
<p>Hopefully you&#8217;ll find this version of script more useful.</p>
						<footer>
							<cite>Comment by <a href='http://markos.gaivo.net' rel='external nofollow' class='url'>markos</a> &#8212; <time datetime="2009-08-06T19:01:12+00:00">August 6, 2009 @ 7:01 pm</time> <a href="#comment-199764">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-206795">
					<article>
						<p>change the function to use while instead of if &#8230; works like a charm.<br />
//Auto grows / shrinks a text area based on size of input text<br />
function growTextArea(obj) {<br />
    while (obj.scrollHeight &gt; obj.clientHeight) {<br />
        obj.rows += 1;<br />
    }</p>
<p>    while (obj.clientHeight &gt; obj.scrollHeight) {<br />
        obj.rows -= 1;<br />
    }<br />
}</p>
<p>your text here</p>
						<footer>
							<cite>Comment by Abe &#8212; <time datetime="2010-01-15T18:14:27+00:00">January 15, 2010 @ 6:14 pm</time> <a href="#comment-206795">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-206796">
					<article>
						<p>lost the text area <img src='http://markos.gaivo.net/blog/wp-includes/images/smilies/icon_sad.gif' alt=':(' class='wp-smiley' /><br />
&lt;textarea onkeyup= &#8220;growTextArea(this);&#8221; onclick= &#8220;growTextArea(this);&#8221; onblur= &#8220;this.rows=1;&#8221;&gt;your text here&lt;/textarea&gt;</p>
						<footer>
							<cite>Comment by Abe &#8212; <time datetime="2010-01-15T18:15:59+00:00">January 15, 2010 @ 6:15 pm</time> <a href="#comment-206796">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-207233">
					<article>
						<p>[...] Auto-grow TEXTAREA (jQuery) [...]</p>
						<footer>
							<cite>Pingback by <a href='http://www.studio404.it/2010/9-script-e-risorse-facebook-per-il-proprio-sito.html' rel='external nofollow' class='url'>9 script e risorse Facebook per il proprio sito &#8212; Studio404 Web Agency</a> &#8212; <time datetime="2010-01-31T14:12:12+00:00">January 31, 2010 @ 2:12 pm</time> <a href="#comment-207233">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-211237">
					<article>
						<p>[...] Auto-grow TEXTAREA (jQuery) [...]</p>
						<footer>
							<cite>Pingback by <a href='http://www.studio404.it/2010/moduli-di-tutto-di-piu.html' rel='external nofollow' class='url'>Moduli, di tutto di pi? &#8212; Studio404 Web Agency</a> &#8212; <time datetime="2010-04-24T11:59:16+00:00">April 24, 2010 @ 11:59 am</time> <a href="#comment-211237">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-219061">
					<article>
						<p>Another solution to get it work is creating a hidden div with same styles, and on each keyup &#8211; replace \n with  (and quote ) in text, put it in that div box and get it&#8217;s height.</p>
						<footer>
							<cite>Comment by <a href='http://www.statools.com/' rel='external nofollow' class='url'>StaTools</a> &#8212; <time datetime="2010-10-26T06:38:16+00:00">October 26, 2010 @ 6:38 am</time> <a href="#comment-219061">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-227316">
					<article>
						<p>it can fix just by CSS.<br />
here&#8217;s my code.i thought it up 20 minutes ago.:p</p>
<p>&#8220;this.style.height = &#8221;&#8221; this is the most important part. it fixed the Firefox browser&#8217;s bug.</p>
<p>CSS: overflow:hidden;<br />
     width:XXXpx;<br />
enjoy it~:D</p>
						<footer>
							<cite>Comment by JianXie &#8212; <time datetime="2011-03-04T04:48:40+00:00">March 4, 2011 @ 4:48 am</time> <a href="#comment-227316">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-227317">
					<article>
						<p>can&#8217;t see the code!<br />
@_@..<br />
&lt;textarea onpropertychange=&#8221;this.style.height = this.scrollHeight + &#8216;px&#8217;;&#8221; oninput=&#8221;this.style.height = &#8221;;this.style.height = this.scrollHeight + &#8216;px&#8217;;&#8221;&gt;&lt;&frasl;textarea&gt;</p>
						<footer>
							<cite>Comment by JianXie &#8212; <time datetime="2011-03-04T04:52:32+00:00">March 4, 2011 @ 4:52 am</time> <a href="#comment-227317">#</a> </cite>
						</footer>
					</article>
				</li>
		
				<li id="comment-264273">
					<article>
						<p>handy code, ThanKu @ Michael McNally</p>
						<footer>
							<cite>Comment by kiramat &#8212; <time datetime="2012-09-05T12:25:31+00:00">September 5, 2012 @ 12:25 pm</time> <a href="#comment-264273">#</a> </cite>
						</footer>
					</article>
				</li>
		
			</ol>


		<p>Sorry, the comment form is closed at this time.</p>

		</article>
	</section>
			<!-- All pages -->
	

	<footer>
		<ul>
			<li>&copy; 2005-2015 Marko Samastur</li>
			
			<li><a href="http://markos.gaivo.net/blog/?feed=rss2">Entries feed</a></li>
			<li><a href="http://markos.gaivo.net/blog/?feed=comments-rss2">Comments feed</a></li>
		</ul>
		<a href="/"><img src="/img/markos_light_small_bg.png" alt="logo" class="mini-logo" /></a>
	</footer>
	<!-- Google analytics -->
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-152438-1']);
	  _gaq.push(['_trackPageview']);
	</script>
	<script src="/js/cookie.js"></script>
</body>
</html>
