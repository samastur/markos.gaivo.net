<!DOCTYPE html>
<html lang="en">
<head>
          <title>A notch above a monkey</title>
        <meta charset="utf-8" />
        <link rel="shortcut icon" href="theme/img/markos.ico" />

        <link href="http://fast.fonts.com/cssapi/aee9b60b-8e94-47f8-b586-3ecbfab51d1c.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="theme/css/home.css" media="screen" title="Light theme" />
        <link rel="alternate stylesheet" type="text/css" href="theme/css/home_dark.css" media="screen" title="Dark theme" />
        <link rel="stylesheet" href="theme/css/ipad.css" media="only screen and (min-device-width : 768px) and (max-device-width : 1024px)">
        <link rel="stylesheet" type="text/css" href="theme/css/smallscreen.css" media="only screen and (max-width: 700px)" />

        <link href="/articles/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="A notch above a monkey Full Atom Feed" />
        <link href="/articles/feeds/rss.xml" type="application/rss+xml" rel="alternate" title="A notch above a monkey Full RSS Feed" />




</head>

<body>
<header id="banner" class="body">
    <h1><a href="/">A notch above a monkey</a> &raquo; Dreaming about arithmetic mean</h1>
</header><!-- /#banner -->

<section class="envelope">
    <article class="post">
        <header class="entry-title">
            <h1 class="entry-title">Dreaming about arithmetic mean</h1>
         
        </header>

        <footer class="post-info">
            <ul>
                <li class="by">Written by: <a href="/">Marko Samastur</a></li>
                <li class="published">Published on: <time datetime="2010-01-24T11:44:00+01:00" pubdate>Sun 24 January 2010</time></li>
                <li class="categories">Category: General development, Javascript
                </li>
            </ul>

        </footer><!-- /.post-info -->

        <div class="post-text">
            <p>I had a crazy dream, where I was back at University, but this time
studying computer science. We were writing a function to calculate an
<a href="http://en.wikipedia.org/wiki/Arithmetic_mean" title="Arithmetic mean">arithmetic
mean</a> of
an array of numbers. A task obviously too simple for college course, but
with dreams you get what you are given.</p>
<p>Discussion started with this function:</p>
<p><codeins ="dreamjs"></codeins></p>
<p>Dream me, who by the way is significantly more bitchy than I ever am,
wasn't pleased and thought he could save few bytes by storing counter
and sum inside of the array:</p>
<p><codeins ="dreamjs2"></codeins></p>
<p>This looked ugly, but what bothered him (me?) was more that it also had
a bug. Integer in
<a href="http://en.wikipedia.org/wiki/JavaScript" title="JavaScript">Javascript</a> is
limited to 2^53^, which is a lot, but sum can still
<a href="http://en.wikipedia.org/wiki/Arithmetic_overflow" title="Arithmetic overflow">overflow</a>
or underflow it. Since mean can never be smaller than smallest or bigger
than biggest number in a list, I could fix it by writing:</p>
<p><codeins ="dreamjs3"></codeins></p>
<p>End of dream. Everything edited for sanity and brevity.</p>
<p>I don't have much to say about second program except that I would never
write something so ugly just to save 16 bytes in a function like this. I
wouldn't even use Javascript if memory was that important.</p>
<p>I am more intrigued by third program. Bug in second is definitely there,
even though few of us operate with numbers big enough to encounter it.</p>
<p>It's interesting, because if I was awake, I would probably never think
of it. I used to worry about bugs like this all the time, when I was
coding in C. It was an unavoidable consequence of the language.</p>
<p>I guess what I am getting at is that it is nice to code in a high-level
language and for the most part not think about implementation details
like this, but only as long as you actually know them so your brain gets
triggered when they matter. Speaking of details, I bet those divisions
can cause rounding errors.</p>
<div class="zemanta-pixie">

[![Reblog this post [with
Zemanta]](http://img.zemanta.com/reblog_e.png?x-id=7ab2d445-07ff-4ec6-bed9-f29a2797d7a3)](http://reblog.zemanta.com/zemified/7ab2d445-07ff-4ec6-bed9-f29a2797d7a3/ "Reblog this post [with Zemanta]")<span
class="zem-script paragraph-reblog"></span>
<script type="text/javascript" src="http://static.zemanta.com/readside/loader.js" defer="defer"></script>
</span>

</div>
        </div><!-- /.entry-content -->

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'markosgaivo';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </article>
</section>

    <footer>
        <ul>
            <li>&copy; 2005-2015 Marko Samastur</li>
            <li><a href="/articles/feeds/rss.xml" rel="alternate" title="A notch above a monkey Full RSS Feed">Entries feed</a></li>
        </ul>
        <a href="/"><img src="/img/markos_light_small_bg.png" alt="logo" class="mini-logo" /></a>
    </footer>
</body>
</html>